<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=gb2312">
<meta name=Generator content="Microsoft Word 12 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:宋体;
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"Cambria Math";
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Cambria;
	panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:微软雅黑;
	panose-1:2 11 5 3 2 2 4 2 2 4;}
@font-face
	{font-family:"\@宋体";
	panose-1:2 1 6 0 3 1 1 1 1 1;}
@font-face
	{font-family:"\@微软雅黑";
	panose-1:2 11 5 3 2 2 4 2 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
h1
	{mso-style-link:"标题 1 Char";
	margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.25pt;
	margin-bottom:.0001pt;
	text-indent:-21.25pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;}
h2
	{mso-style-link:"标题 2 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:49.6pt;
	margin-bottom:.0001pt;
	text-indent:-1.0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:13.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
h3
	{mso-style-link:"标题 3 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:70.9pt;
	margin-bottom:.0001pt;
	text-indent:-1.0cm;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
h4
	{mso-style-link:"标题 4 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:99.2pt;
	margin-bottom:.0001pt;
	text-indent:-35.4pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-style:italic;}
h5
	{mso-style-link:"标题 5 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#243F60;
	font-weight:normal;}
h6
	{mso-style-link:"标题 6 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#243F60;
	font-weight:normal;
	font-style:italic;}
p.MsoHeading7, li.MsoHeading7, div.MsoHeading7
	{mso-style-link:"标题 7 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
p.MsoHeading8, li.MsoHeading8, div.MsoHeading8
	{mso-style-link:"标题 8 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
p.MsoHeading9, li.MsoHeading9, div.MsoHeading9
	{mso-style-link:"标题 9 Char";
	margin-top:10.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:0cm;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:10.0pt;
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:21.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:42.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"页眉 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	text-align:center;
	line-height:115%;
	layout-grid-mode:char;
	border:none;
	padding:0cm;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"页脚 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	layout-grid-mode:char;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";
	color:#4F81BD;
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"标题 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"标题 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"标题 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"标题 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:15.0pt;
	margin-left:0cm;
	border:none;
	padding:0cm;
	font-size:26.0pt;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
p.MsoSubtitle, li.MsoSubtitle, div.MsoSubtitle
	{mso-style-link:"副标题 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;
	letter-spacing:.75pt;
	font-style:italic;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
pre
	{mso-style-link:"HTML 预设格式 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:宋体;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"批注框文本 Char";
	margin:0cm;
	margin-bottom:.0001pt;
	font-size:9.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{margin:0cm;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:36.0pt;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:36.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoQuote, li.MsoQuote, div.MsoQuote
	{mso-style-link:"引用 Char";
	margin-top:0cm;
	margin-right:0cm;
	margin-bottom:10.0pt;
	margin-left:0cm;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	color:black;
	font-style:italic;}
p.MsoIntenseQuote, li.MsoIntenseQuote, div.MsoIntenseQuote
	{mso-style-link:"明显引用 Char";
	margin-top:10.0pt;
	margin-right:46.8pt;
	margin-bottom:14.0pt;
	margin-left:46.8pt;
	line-height:115%;
	border:none;
	padding:0cm;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
span.MsoSubtleEmphasis
	{color:gray;
	font-style:italic;}
span.MsoIntenseEmphasis
	{color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
span.MsoSubtleReference
	{font-variant:small-caps;
	color:#C0504D;
	text-decoration:underline;}
span.MsoIntenseReference
	{font-variant:small-caps;
	color:#C0504D;
	letter-spacing:.25pt;
	font-weight:bold;
	text-decoration:underline;}
span.MsoBookTitle
	{font-variant:small-caps;
	letter-spacing:.25pt;
	font-weight:bold;}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:24.0pt;
	margin-right:0cm;
	margin-bottom:0cm;
	margin-left:21.25pt;
	margin-bottom:.0001pt;
	text-indent:-21.25pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.Char
	{mso-style-name:"页眉 Char";
	mso-style-link:页眉;}
span.Char0
	{mso-style-name:"页脚 Char";
	mso-style-link:页脚;}
span.1Char
	{mso-style-name:"标题 1 Char";
	mso-style-link:"标题 1";
	font-family:"Cambria","serif";
	color:#365F91;
	font-weight:bold;}
span.2Char
	{mso-style-name:"标题 2 Char";
	mso-style-link:"标题 2";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.3Char
	{mso-style-name:"标题 3 Char";
	mso-style-link:"标题 3";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.4Char
	{mso-style-name:"标题 4 Char";
	mso-style-link:"标题 4";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
span.5Char
	{mso-style-name:"标题 5 Char";
	mso-style-link:"标题 5";
	font-family:"Cambria","serif";
	color:#243F60;}
span.6Char
	{mso-style-name:"标题 6 Char";
	mso-style-link:"标题 6";
	font-family:"Cambria","serif";
	color:#243F60;
	font-style:italic;}
span.7Char
	{mso-style-name:"标题 7 Char";
	mso-style-link:"标题 7";
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
span.8Char
	{mso-style-name:"标题 8 Char";
	mso-style-link:"标题 8";
	font-family:"Cambria","serif";
	color:#4F81BD;}
span.9Char
	{mso-style-name:"标题 9 Char";
	mso-style-link:"标题 9";
	font-family:"Cambria","serif";
	color:#404040;
	font-style:italic;}
span.Char1
	{mso-style-name:"标题 Char";
	mso-style-link:标题;
	font-family:"Cambria","serif";
	color:#17365D;
	letter-spacing:.25pt;}
span.Char2
	{mso-style-name:"副标题 Char";
	mso-style-link:副标题;
	font-family:"Cambria","serif";
	color:#4F81BD;
	letter-spacing:.75pt;
	font-style:italic;}
span.Char3
	{mso-style-name:"引用 Char";
	mso-style-link:引用;
	color:black;
	font-style:italic;}
span.Char4
	{mso-style-name:"明显引用 Char";
	mso-style-link:明显引用;
	color:#4F81BD;
	font-weight:bold;
	font-style:italic;}
span.Char5
	{mso-style-name:"批注框文本 Char";
	mso-style-link:批注框文本;}
span.HTMLChar
	{mso-style-name:"HTML 预设格式 Char";
	mso-style-link:"HTML 预设格式";
	font-family:宋体;}
span.apple-style-span
	{mso-style-name:apple-style-span;}
span.apple-converted-space
	{mso-style-name:apple-converted-space;}
span.langwithname
	{mso-style-name:langwithname;}
.MsoChpDefault
	{font-size:11.0pt;}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
 /* Page Definitions */
 @page WordSection1
	{size:595.3pt 841.9pt;
	margin:72.0pt 90.0pt 72.0pt 90.0pt;
	layout-grid:15.6pt;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0cm;}
ul
	{margin-bottom:0cm;}
-->
</style>

</head>

<body lang=ZH-CN link=blue vlink=purple style='text-justify-trim:punctuation'>

<div class=WordSection1 style='layout-grid:15.6pt'>

<p class=MsoNormal align=center style='text-align:center'><span lang=EN-US
style='font-size:18.0pt;line-height:115%;font-family:宋体'>林氏物语</span><span
lang=EN-US style='font-size:18.0pt;line-height:115%'>.</span><span
style='font-size:18.0pt;line-height:115%;font-family:宋体'>技术乱弹</span><span
lang=EN-US style='font-size:18.0pt;line-height:115%;font-family:宋体'>之</span><span
lang=EN-US style='font-size:18.0pt;line-height:115%'>hand in hand </span><span
lang=EN-US style='font-size:18.0pt;line-height:115%'>with </span><span
lang=EN-US style='font-size:18.0pt;line-height:115%'>antlr</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>版权声明：</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>&nbsp; </span><span
style='font-family:宋体'>本文由林氏原创，遵循</span><span lang=EN-US>GPL</span><span
style='font-family:宋体'>许可，你可以自由地对本文进行任何目的的修改、转载、引用和发布，但基于此文所作的任何修改、转载、引用和发布品也需要遵循</span><span
lang=EN-US>GPL</span><span style='font-family:宋体'>许可，并要求在开头保留本声明。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>联系作者：如果您有什么样的批评与指教，欢迎发</span><span
lang=EN-US>email</span><span style='font-family:宋体'>到</span><span lang=EN-US>
workspace.public@gmail.com;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:宋体'>如需获取最新的更新，请在</span><span lang=EN-US>email</span><span
lang=EN-US style='font-family:宋体'>的</span><span lang=EN-US>subject</span><span
lang=EN-US style='font-family:宋体'>填写</span><span lang=EN-US>get 010</span><span
lang=EN-US>4</span><span lang=EN-US>0</span><span lang=EN-US>2</span><span
lang=EN-US>00</span><span lang=EN-US>1</span><span lang=EN-US style='font-family:
宋体'>发送至</span><span lang=EN-US>&nbsp; workspace.public@gmail.com;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US
style='font-family:宋体'>如需获取林氏物语系列文章的列表，请在</span><span lang=EN-US>email</span><span
lang=EN-US style='font-family:宋体'>的</span><span lang=EN-US>subject</span><span
lang=EN-US style='font-family:宋体'>填写</span><span lang=EN-US>get list</span><span
lang=EN-US style='font-family:宋体'>发送至</span><span lang=EN-US>:</span><span
lang=EN-US>workspace.public@gmail.com;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>如需获取林氏物语系列文章，请在</span><span
lang=EN-US>email</span><span style='font-family:宋体'>的</span><span lang=EN-US>subject</span><span
style='font-family:宋体'>填写</span><span lang=EN-US>get all</span><span
style='font-family:宋体'>发送至</span><span lang=EN-US>:workspace.public@gmail.com;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>&nbsp; </span><span
style='font-family:宋体'>由于没有自己的邮件服务器，没有找到带附件自动回复的免费邮件服务器，采用客户端带附件自动回复，所以是非即时性回复，最迟回复时间尽量不超过一周，请勿发送多次。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>l </span><span
style='font-family:宋体'>本文编号</span><span lang=EN-US>:010402001</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>l </span><span
style='font-family:宋体'>所属文集</span><span lang=EN-US>:</span><span
style='font-family:宋体'>林氏物语</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>l </span><span
style='font-family:宋体'>所属类别</span><span lang=EN-US>:</span><span
style='font-family:宋体'>技术乱弹</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>l </span><span
style='font-family:宋体'>所属细类</span><span lang=EN-US>:</span><span
style='font-family:宋体'>编译原理</span> </p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc361871682"><span lang=EN-US
style='font-family:宋体'><span lang=EN-US>第一章</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>前言</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>3</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc361871683"><span lang=EN-US
style='font-family:宋体'><span lang=EN-US>第二章</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>安装篇</span></span>:<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871684"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第一节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>安装前的检查</span></span>:<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871685"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>1<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>是否已经安装了</span></span>java
1.5 <span lang=EN-US style='font-family:宋体'><span lang=EN-US>或<span lang=EN-US>者更高的版本。</span></span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871686"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>2<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>是否已经下载了</span></span>eclipse
3.x.<span style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>4</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871687"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>3<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>建立本教程演示目录。</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>5</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871688"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第二节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>安装过程</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871689"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>1<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>下载</span></span>antworks<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>：</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>6</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871690"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>2<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>下载</span></span>antlr<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>的</span></span>jar<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>包</span></span><span
lang=EN-US><span lang=EN-US> </span></span><span lang=EN-US style='font-family:
宋体'><span lang=EN-US>当前的版本是</span></span> v3.3<span style='color:windowtext;
display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>7</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871691"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>3<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>安装</span></span>eclipse<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>插件。</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>8</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871692"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>4<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>确认你的安装是否正确。</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>11</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc361871693"><span lang=EN-US
style='font-family:宋体'><span lang=EN-US>第三章</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>工具环境介绍篇：</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>12</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871694"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第一节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>先从</span></span>antlrworks<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>开始体验</span></span>antlr.<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>13</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871695"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>1<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>创<span lang=EN-US>建语法文件</span></span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>13</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871696"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>2<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>运行调试语法文件</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>15</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871697"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第二节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>再开始品尝</span></span>anltrv3ide<span
style='color:windowtext;display:none;text-decoration:none'>. </span><span
style='color:windowtext;display:none;text-decoration:none'>18</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871698"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>1<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>新建一个</span></span>antlr<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>项目</span></span>.<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>18</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871699"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>2<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>创建语法文件</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>19</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871700"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>3<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>进行或者检查插件的设置</span></span>..<span
style='color:windowtext;display:none;text-decoration:none'> </span><span
style='color:windowtext;display:none;text-decoration:none'>23</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871701"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>4<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>编写测试的程序</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>26</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871702"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第三节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Antlrworks<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>工具的各部分使用说明</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>30</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871703"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第四节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Antlrv3ide<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>插件的各部分使用说明</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>31</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc361871704"><span lang=EN-US
style='font-family:宋体'><span lang=EN-US>第四章</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>使用篇</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>33</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871705"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第一节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>无责任乱弹</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>33</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871706"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第二节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>关于语法解析的一些基本概念</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>35</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871707"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>1<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>什么是词法分析，什么是语法分析，这两者有什么不同？</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>36</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871708"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>2<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>巴克斯</span></span>-<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>诺尔范式</span></span>,<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>产生式</span></span>,<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>最左推导</span></span>,<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>最右推导</span></span>,<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>左递归</span></span>,<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>右递归</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>38</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871709"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>3<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>语法解析的自顶向下和自底向上的策略</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>39</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871710"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第三节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>经典的表达式<span lang=EN-US>教程解析</span></span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>44</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871711"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>1<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>界定需求</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>44</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871712"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>2<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>设计语法</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>45</span></a></span></p>

<p class=MsoToc3 style='margin-left:48.0pt'><span lang=EN-US><a
href="#_Toc361871713"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第</span></span>3<span
lang=EN-US style='font-family:宋体'><span lang=EN-US>小节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>实现语义</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>51</span></a></span></p>

<p class=MsoToc2 style='margin-left:24.0pt'><span lang=EN-US><a
href="#_Toc361871714"><span lang=EN-US style='font-family:宋体'><span lang=EN-US>第四节</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>状态机代码生成框架实例分析</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>52</span></a></span></p>

<p class=MsoToc1><span lang=EN-US><a href="#_Toc361871715"><span lang=EN-US
style='font-family:宋体'><span lang=EN-US>第五章</span></span><span
style='font-size:10.5pt;line-height:115%;color:windowtext;text-decoration:none'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>引用</span></span><span
style='color:windowtext;display:none;text-decoration:none'>... </span><span
style='color:windowtext;display:none;text-decoration:none'>52</span></a></span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc361871682"><span lang=EN-US>第一章 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>前言</span></a></h1>

<p class=MsoNormal style='margin-left:21.25pt'><span style='font-family:宋体'>讨论组地址</span><span
lang=EN-US>: &nbsp;</span><span lang=EN-US><a
href="http://groups.google.com/group/antlr_chinese/">http://groups.google.com/group/antlr_chinese/</a></span></p>

<p class=MsoNormal style='margin-left:21.25pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>仔细数起来</span><span
lang=EN-US>,coding</span><span style='font-family:宋体'>生涯也有不少年头了</span><span
lang=EN-US>,</span><span style='font-family:宋体'>从</span><span lang=EN-US>99</span><span
style='font-family:宋体'>年到现在</span><span lang=EN-US>,</span><span
style='font-family:宋体'>虽然中途离开过几年</span><span lang=EN-US>,</span><span
style='font-family:宋体'>但始终没有停留过关注</span><span lang=EN-US>.</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>在这不长不短的岁月里</span><span
lang=EN-US>,</span><span style='font-family:宋体'>在指尖流过的语言也有不少了</span><span
lang=EN-US>,</span><span style='font-family:宋体'>从学生年代的</span><span lang=EN-US>c/cpp,object
pascal,asm,sql</span><span style='font-family:宋体'>等到工作中用过的</span><span
lang=EN-US>vbs/js,java,html,xml, schema,R,erlang</span><span style='font-family:
宋体'>和一些即兴学的</span><span lang=EN-US>shell script</span><span style='font-family:
宋体'>等，年轻时偏执于语言的表层，略显轻狂</span><span lang=EN-US>,</span><span style='font-family:
宋体'>并以之为傲。后来修习图灵机，</span><span lang=EN-US>lambda</span><span style='font-family:
宋体'>算子</span><span lang=EN-US>,</span><span style='font-family:宋体'>组合子之类的计算模型，尝试着对语言的本质做了一些深入的思考</span><span
lang=EN-US>,</span><span style='font-family:宋体'>才发觉其实自己一直都是井底之蛙。在接触了古老的</span><span
lang=EN-US>lex +yacc</span><span style='font-family:宋体'>后</span><span
lang=EN-US>,</span><span style='font-family:宋体'>为其高度抽象的简洁与优美所折服</span><span
lang=EN-US>.</span><span style='font-family:宋体'>遂不能自拔。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>一直都比较喜欢类似</span><span
lang=EN-US>lex+yacc</span><span style='font-family:宋体'>之类产生式工具，由于工作主要是</span><span
lang=EN-US>java</span><span style='font-family:宋体'>相关的</span><span lang=EN-US>,</span><span
style='font-family:宋体'>也接触了</span><span lang=EN-US>antlr.</span><span
style='font-family:宋体'>并对其保持比较浓厚的兴趣</span><span lang=EN-US>,</span><span
style='font-family:宋体'>时隔几年后重回</span><span lang=EN-US>it</span><span
style='font-family:宋体'>时</span><span lang=EN-US>,</span><span style='font-family:
宋体'>因为一个小产品的开发需要，对词法语法解析工具选型，选了几个工具，</span><span lang=EN-US>javacc </span><span
style='font-family:宋体'>，</span><span lang=EN-US>antlr </span><span
style='font-family:宋体'>，</span><span lang=EN-US>jflex+CUP</span><span
style='font-family:宋体'>，最终还是选择了</span><span lang=EN-US>antlr</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>关于工具的选择方面</span><span
lang=EN-US>. </span><span style='font-family:宋体'>一直认为</span><span lang=EN-US>,</span><span
style='font-family:宋体'>工欲善其事，必先利其器，但何为利器，如何评价，一直没有清晰的定义，有些东西，明明很好很强大，但是就是无法推广，比如基于强大</span><span
lang=EN-US>lambda</span><span style='font-family:宋体'>算子的函数式语言及其平台如</span><span
lang=EN-US>lisp </span><span style='font-family:宋体'>，</span><span lang=EN-US>schema
</span><span style='font-family:宋体'>等。很多年后，才明白，评价一个一个东西，不仅仅看点上的表现，还需要看面上的表现，比如周边的环境支撑等</span>
<span style='font-family:宋体'>，哪怕点上的表现稍逊一筹，只要面上的表现优异，也能弥补其缺陷。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>一个工具，被选择的首当其冲的标准当属于其生产能力，评价选择一个工具的生产能力，除了要看它的主要功能外，还要看它对你的生产流程的覆盖程度。覆盖的越全，也就认为其产出效率越高。凭借</span><span
lang=EN-US>eclipse</span><span style='font-family:宋体'>这个强大的工具平台。</span><span
lang=EN-US>Antlr </span><span style='font-family:宋体'>做到了从前端语法设计到调试到集成测试的无缝覆盖，这确实是我选择其的一个关键决定因素。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>贸然的使用一个不成熟的工具，或者没有实践过的新解决方案，不管它在别人那里是如何成功的，你都需要支付一定风险的。利器从来都是双刃的，伤人亦能伤己，用的好，强虏灰飞烟灭，用的不好，伤痕累累，欲罢不能。诚然，形式化的产生式编程方式如</span>
<span lang=EN-US>antlr</span><span style='font-family:宋体'>的确有其强大且简洁优雅的一面，但凡事有利必有弊，一旦遇到问题，其背后隐藏的抽象的复杂度足够让一个项目或产品栽倒在时间压力面前。这也是这个工具鲜被采用的原因。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>开发结束后</span><span
lang=EN-US>,</span><span style='font-family:宋体'>对使用这个工具所遇到的问题以及一些解决方法，作了一些总结和整理。前车之鉴，后事之师，不管是为人还是为己。于是萌生了写个文档的想法，说是写，实际上是不过是将所找的零碎资料拼装而已。在找资料的过程中发现，鲜有中文教程，只有一本</span><span
lang=EN-US>v2.75</span><span style='font-family:宋体'>的中文版规范。</span> <span
style='font-family:宋体'>虽然官方的英文文档不算少，但对于在非英语母语的我们来说，对英文信息的敏感度较低，从那堆信息里，寻找一条合适的学习路径略显艰难。于是就学习吾友陈民的做法，尽力写一些教程像他以前帮助我一样帮助其他人。另外在这里也特别感谢甘草同志</span><span
lang=EN-US>(healer.kx.yu@gmail.com)</span><span style='font-family:宋体'>，加入这个阵营</span><span
lang=EN-US>…</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>这篇教程定位为帮助零基础的初学者入门到掌握编译前端，为熟悉</span><span
lang=EN-US>antlr</span><span style='font-family:宋体'>的人，提供一些问题备忘录，以及共享一些对</span><span
lang=EN-US>antlr</span><span style='font-family:宋体'>本身设计的看法。希望能对您有所帮助。</span></p>

<h1><a name="_Toc361871683"><span lang=EN-US>第二章 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>安装篇</span></a><span lang=EN-US>:</span></h1>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>选择</span><span
lang=EN-US>antlr</span><span style='font-family:宋体'>确实有很大的优势。</span> <span
style='font-family:宋体'>有官方自带的</span><span lang=EN-US>antlrworks </span><span
style='font-family:宋体'>，有</span> <span style='font-family:宋体'>民间的</span><span
lang=EN-US>antlrv3ide </span><span style='font-family:宋体'>，和</span><span
lang=EN-US> netbeans</span><span style='font-family:宋体'>什么的插件等等。还有一些收费的</span><span
lang=EN-US>eclipse</span><span style='font-family:宋体'>插件等，具体就不去细列了，这个教程主要集中在</span><span
lang=EN-US>antlrworks </span><span style='font-family:宋体'>和</span><span
lang=EN-US> antlrv3ide+eclipse</span><span style='font-family:宋体'>等两个</span><span
lang=EN-US> ide </span><span style='font-family:宋体'>上面。</span></p>

<p class=MsoNormal style='text-indent:21.0pt'><span style='font-family:宋体'>通过本篇的学习，你应该能搭建好一个可以实战的平台。</span></p>

<h2><a name="_Toc361871684"><span lang=EN-US>第一节<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>安装前的检查</span></a><span lang=EN-US>:</span><span
lang=EN-US> </span></h2>

<h3><a name="_Toc361871685"><span lang=EN-US>第1小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>是否已经安装了</span></a><span lang=EN-US>java
1.5 </span><span style='font-family:宋体'>或者更高的版本。</span> </h3>

<p class=MsoListParagraph><span style='font-family:宋体'>确认方法</span><span
lang=EN-US> java –version </span><span style='font-family:宋体'>和</span><span
lang=EN-US>javac –version</span><span style='font-family:宋体'>，如果不能工作，或者版本不对，请检查环境变量的</span><span
lang=EN-US>JAVA_HOME</span></p>

<h3><a name="_Toc361871686"><span lang=EN-US>第2小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>是否已经下载了</span></a><span lang=EN-US>eclipse
3.x.</span></h3>

<p class=MsoListParagraphCxSpFirst><span style='font-family:宋体'>教程使用的是</span><span
lang=EN-US> eclipse 3.6.2(helios)&nbsp; </span><span lang=EN-US
style='font-size:9.0pt;line-height:115%;font-family:"微软雅黑","sans-serif"'>Eclipse
Modeling Tools</span><span lang=EN-US> </span><span style='font-family:宋体'>那个版本，最好保持和教程一致的。不能确定</span><span
lang=EN-US>antlrv3ide</span><span style='font-family:宋体'>是否适用了</span><span
lang=EN-US>gef </span><span style='font-family:宋体'>或者</span><span lang=EN-US>gmf&nbsp;
</span><span style='font-family:宋体'>但建议如果你使用其它的类型的</span><span lang=EN-US>eclipse
</span><span style='font-family:宋体'>，将</span><span lang=EN-US>modeling </span><span
style='font-family:宋体'>模块升级到最新版本。同时还需要安装一个</span><span lang=EN-US>dynamic
languages toolkit core frameworks.</span><span style='font-family:宋体'>这个是</span><span
lang=EN-US>antlrv3ide</span><span style='font-family:宋体'>依赖的插件</span><span
lang=EN-US>.</span><span style='font-family:宋体'>本教程所用的插件如下</span><span
lang=EN-US>:</span><span style='font-family:宋体'>（画圈圈的是没有安装插件前就要存在的。如果没有，你需要在</span><span
lang=EN-US> help-&gt;install new software </span><span style='font-family:宋体'>中选择</span><span
lang=EN-US> helios</span><span style='font-family:宋体'>这个更新源进行更新）</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:18.0pt'><span
lang=EN-US><img border=0 width=553 height=363
src="hand%20in%20hand%20with%20antlr.files/image001.jpg"></span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:18.0pt'><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc361871687"><span lang=EN-US>第3小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>建立本教程演示目录。</span></a></h3>

<p class=MsoListParagraphCxSpFirst><span style='font-family:宋体'>建立一个目录</span><span
lang=EN-US>(d:\antlrdemo),</span><span style='font-family:宋体'>用作本教程的演示目录，这个目录可以更换到其他的地方，<span
style='color:red'>但是请注意，请不要带有中文或者其他非英文字母</span>。</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:宋体'>在</span><span
lang=EN-US>anltrdemo</span><span style='font-family:宋体'>下面建立一个</span><span
lang=EN-US>antlrworks_data</span><span style='font-family:宋体'>目录。</span></p>

<p class=MsoListParagraphCxSpMiddle><span style='font-family:宋体'>将</span><span
lang=EN-US>eclipse</span><span style='font-family:宋体'>拷贝至</span><span
lang=EN-US> antlrdemo</span><span style='font-family:宋体'>目录下。</span> </p>

<p class=MsoListParagraphCxSpLast><span style='font-family:宋体'>并在</span><span
lang=EN-US>eclipse</span><span style='font-family:宋体'>目录下建立</span> <span
style='font-family:宋体'>一个</span><span lang=EN-US>workspace</span><span
style='font-family:宋体'>的目录，并在启动</span><span lang=EN-US>eclipse</span><span
style='font-family:宋体'>的时候，将工作空间设置为这个目录的工作空间。这样做的目的便于管理资料。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=271 height=305
src="hand%20in%20hand%20with%20antlr.files/image002.png"></span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:18.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:18.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>就绪之后，来开始我们的安装过程。。。</span></p>

<h2><a name="_Toc361871688"><span lang=EN-US>第二节<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>安装过程</span></a></h2>

<h3><a name="_Toc361871689"><span lang=EN-US>第1小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>下载</span></a><span lang=EN-US>antworks</span><span
style='font-family:宋体'>：</span></h3>

<p class=MsoNormal><span style='font-family:宋体'>下载</span><span lang=EN-US>
antlrworks </span><span style='font-family:宋体'>这个集成调试工具，</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在官方的网址</span> <span lang=EN-US><a
href="http://www.antlr.org/download.html">http://www.antlr.org/download.html</a></span><span
lang=EN-US> </span><span style='font-family:宋体'>上面</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=423
src="hand%20in%20hand%20with%20antlr.files/image003.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>具体的包地址</span><span lang=EN-US>:
</span><span lang=EN-US>&nbsp;</span><span lang=EN-US>http://www.antlr.org/download/antlrworks-1.4.2.jar</span></p>

<p class=MsoNormal><span style='font-family:宋体'>下载之后扔到</span><span lang=EN-US>
antlrdemo</span><span style='font-family:宋体'>目录下。</span></p>

<h3><a name="_Toc361871690"><span lang=EN-US>第2小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>下载</span></a><span lang=EN-US>antlr</span><span
style='font-family:宋体'>的</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包</span> <span style='font-family:宋体'>当前的版本是</span><span
lang=EN-US> v3.3</span></h3>

<p class=MsoNormal><span style='font-family:宋体'>在官方的网址</span> <span lang=EN-US><a
href="http://www.antlr.org/download.html">http://www.antlr.org/download.html</a></span><span
lang=EN-US> </span><span style='font-family:宋体'>上面</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=347
src="hand%20in%20hand%20with%20antlr.files/image004.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>具体的</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包位置</span><span lang=EN-US>:http://www.antlr.org/download/antlr-3.3-complete.jar</span></p>

<p class=MsoNormal><span style='font-family:宋体'>下载之后扔到</span><span lang=EN-US>
antlrdemo</span><span style='font-family:宋体'>目录下。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc361871691"><span lang=EN-US>第3小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>安装</span></a><span lang=EN-US>eclipse</span><span
style='font-family:宋体'>插件。</span> </h3>

<p class=MsoNormal><span style='font-family:宋体'>运行</span><span lang=EN-US>eclipse
3.6.2 </span><span style='font-family:宋体'>，如果是第一次，请设置</span><span lang=EN-US>
workspace</span><span style='font-family:宋体'>的位置为</span><span lang=EN-US>
antlrdemo</span><span style='font-family:宋体'>下面的</span><span lang=EN-US>eclipse</span><span
style='font-family:宋体'>的</span><span lang=EN-US>workspace</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=282
src="hand%20in%20hand%20with%20antlr.files/image005.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=553 height=407
src="hand%20in%20hand%20with%20antlr.files/image006.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=538
src="hand%20in%20hand%20with%20antlr.files/image007.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>Ps: antlrv3ide </span><span
style='font-family:宋体'>的插件</span><span lang=EN-US>updaesuite </span><span
style='font-family:宋体'>的地址</span><span lang=EN-US>: </span><span lang=EN-US><a
href="http://antlrv3ide.sourceforge.net/updates">http://antlrv3ide.sourceforge.net/updates</a></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=553 height=539
src="hand%20in%20hand%20with%20antlr.files/image008.jpg"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>毫无悬念地全选，同意什么的，就安装完了。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc361871692"><span lang=EN-US>第4小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>确认你的安装是否正确。</span></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>确认</span><span lang=EN-US>antlrworks
:</span><span style='font-family:宋体'>双击</span><span lang=EN-US>antlrworks&nbsp;
</span><span style='font-family:宋体'>，如果看到可视界面，就</span><span lang=EN-US>ok</span><span
style='font-family:宋体'>了。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>确认</span><span lang=EN-US>antlrv3ide:</span><span
style='font-family:宋体'>打开</span><span lang=EN-US>eclipse </span><span
style='font-family:宋体'>，安装插件成功后，</span> <span style='font-family:宋体'>打开</span><span
lang=EN-US>window</span><span lang=EN-US style='font-family:Wingdings'>à</span><span
lang=EN-US>perfermance </span><span style='font-family:宋体'>可以看到</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=310
id="图片 25" src="hand%20in%20hand%20with%20antlr.files/image009.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>看到这个，差不多就安装正确了</span><span
lang=EN-US>. </span><span style='font-family:宋体'>到目前为止，</span><span lang=EN-US>antlrdemo</span><span
style='font-family:宋体'>目录有两个目录：</span><span lang=EN-US>eclipse </span><span
style='font-family:宋体'>和</span><span lang=EN-US>antlrworks_data</span><span
style='font-family:宋体'>和两个</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>文件</span><span lang=EN-US>: antlrworks-1.4.2.jar </span><span
style='font-family:宋体'>和</span><span lang=EN-US>antlr-3.3-complete.jar;</span></p>

<h1><a name="_Toc361871693"><span lang=EN-US>第三章 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>工具环境介绍篇：</span></a></h1>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>虽然一般的开发里面用</span><span lang=EN-US>antlrv3ide</span><span
style='font-family:宋体'>就足够了，但是，个人觉得</span><span lang=EN-US>antlrworks</span><span
style='font-family:宋体'>在调试语法的时候比较清爽。而且</span><span lang=EN-US>antlrv3ide</span><span
style='font-family:宋体'>不能显示抽象语法树，但</span><span lang=EN-US>antlrworks </span><span
style='font-family:宋体'>可以，所以，一般都是双管齐下。前期的语法规则分析和调试之类的，就用</span><span
lang=EN-US>antlrworks </span><span style='font-family:宋体'>，涉及到语义动作相关，需要嵌入代码的时候，就切入</span><span
lang=EN-US>antlrv3ide </span><span style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>比较列表</span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=189 valign=top style='width:142.0pt;border:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>差异点</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=EN-US>Antlrworks</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span lang=EN-US>Antlrv3ide</span></p>
  </td>
 </tr>
 <tr>
  <td width=189 valign=top style='width:142.0pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>运行形式</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>独立运行的</span><span lang=EN-US>java</span><span
  style='font-family:宋体'>程序</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>需要依赖</span><span lang=EN-US>eclipse</span></p>
  </td>
 </tr>
 <tr>
  <td width=189 valign=top style='width:142.0pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>使用配置复杂性</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>傻瓜式，在界面内全部展现出来</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>分散隐蔽，对不熟悉的人寻找有一定的难度。</span></p>
  </td>
 </tr>
 <tr>
  <td width=189 valign=top style='width:142.0pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>图形化界面支持</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>全图形化</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>基本图形化，但对抽象语法树支持不好</span><span
  lang=EN-US>.</span></p>
  </td>
 </tr>
 <tr>
  <td width=189 valign=top style='width:142.0pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>环境支持</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>几乎不能融入其它环境，理论上可以通过设置</span><span
  lang=EN-US>classpath</span><span style='font-family:宋体'>等来设置引用的</span><span
  lang=EN-US>jar</span><span style='font-family:宋体'>或者</span><span lang=EN-US>class</span><span
  style='font-family:宋体'>等，但很难用，靠使用者个人手工编译</span><span lang=EN-US>java</span><span
  style='font-family:宋体'>的能力来保证。</span></p>
  </td>
  <td width=189 valign=top style='width:142.05pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
  normal'><span style='font-family:宋体'>可以和在</span><span lang=EN-US>eclipse</span><span
  style='font-family:宋体'>上面开发的项目无缝集成在一起。</span></p>
  </td>
 </tr>
</table>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>作为初级阶段，这里的使用篇就以经典的表达式解析来展现。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>就绪后，就开始我们的使用之旅吧</span><span
lang=EN-US>…</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>通过本篇的学习，你应该可以运行示例的</span><span lang=EN-US>demo</span><span
style='font-family:宋体'>文件，并了解工具的各部分的构成。</span></p>

<h2><a name="_Toc361871694"><span lang=EN-US>第一节<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>先从</span></a><span lang=EN-US>antlrworks</span><span
style='font-family:宋体'>开始体验</span><span lang=EN-US>antlr.</span></h2>

<h3><a name="_Toc361871695"><span lang=EN-US>第1小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>创建语法文件</span></a></h3>

<h4><span lang=EN-US>第1小小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>可选一</span><span lang=EN-US>:</span><span
style='font-family:宋体'>下载语法文件</span><span lang=EN-US>.</span></h4>

<p class=MsoNormal><span style='font-family:宋体'>下载</span> <span lang=EN-US>( </span><span
lang=EN-US><a href="http://www.antlr.org/works/help/tutorial/content/Expr.g">http://www.antlr.org/works/help/tutorial/content/Expr.g</a></span><span
lang=EN-US> )</span><span style='font-family:宋体'>到</span><span lang=EN-US>antlrworks_data
</span></p>

<p class=MsoNormal><span lang=EN-US>(</span><span style='font-family:宋体;
color:red'>注意</span><span lang=EN-US style='color:red'>:</span><span
style='font-family:宋体;color:red'>文件名不要改变，仍然为</span><span lang=EN-US
style='color:red'>Expr.g</span><span lang=EN-US>)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>然后用</span><span lang=EN-US>antlrworks
</span><span style='font-family:宋体'>打开这个</span><span lang=EN-US>Expr.g</span><span
style='font-family:宋体'>文件</span><span lang=EN-US>: file -&gt; open ,</span><span
style='font-family:宋体'>选择</span><span lang=EN-US>antlrworks_data</span><span
style='font-family:宋体'>目录的</span><span lang=EN-US>Expr.g</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h4><span lang=EN-US>第2小小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>可选二</span><span lang=EN-US>:</span><span
style='font-family:宋体'>手工输入语法文件。</span></h4>

<p class=MsoNormal><span lang=EN-US><img border=0 width=405 height=260
src="hand%20in%20hand%20with%20antlr.files/image010.png"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>打开</span><span lang=EN-US>antlrworks</span><span
style='font-family:宋体'>，</span> <span style='font-family:宋体'>新建一个</span><span
lang=EN-US> antlr_3 Grammer&nbsp; *.g </span><span style='font-family:宋体'>文件</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=349
src="hand%20in%20hand%20with%20antlr.files/image011.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>语法名字叫</span><span lang=EN-US>Expr
</span></p>

<p class=MsoNormal><span style='font-family:宋体'>类型名字叫</span><span lang=EN-US>combined
grammar</span></p>

<p class=MsoNormal><span style='font-family:宋体'>保存在</span> <span lang=EN-US>antlrworks_data</span><span
style='font-family:宋体'>目录下。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在将下面内容拷贝到编辑器。</span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span style='font-family:宋体'>拷贝开始</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>grammar Expr;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>@header {</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>package test;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>import
java.util.HashMap;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>@lexer::header
{package test;}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>@members {</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>/** Map variable
name to Integer object holding value */</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>HashMap memory =
new HashMap();</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>prog:&nbsp;&nbsp;
stat+ ;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>stat:&nbsp;&nbsp;
expr NEWLINE {System.out.println($expr.value);}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; ID '=' expr NEWLINE</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{memory.put($ID.text, new Integer($expr.value));}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; NEWLINE</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>expr returns [int
value]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
:&nbsp;&nbsp; e=multExpr {$value = $e.value;}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(&nbsp;&nbsp; '+' e=multExpr {$value += $e.value;}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; '-' e=multExpr {$value -= $e.value;}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
)*</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>multExpr returns
[int value]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
:&nbsp;&nbsp; e=atom {$value = $e.value;} ('*' e=atom {$value *= $e.value;})*</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
; </span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>atom returns [int
value]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
:&nbsp;&nbsp; INT {$value = Integer.parseInt($INT.text);}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; ID</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Integer v = (Integer)memory.get($ID.text);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if ( v!=null ) $value = v.intValue();</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else System.err.println(&quot;undefined variable &quot;+$ID.text);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; '(' e=expr ')' {$value = $e.value;}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>ID&nbsp;
:&nbsp;&nbsp; ('a'..'z'|'A'..'Z')+ ;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>INT :&nbsp;&nbsp;
'0'..'9'+ ;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>NEWLINE:'\r'? '\n'
;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>WS&nbsp;
:&nbsp;&nbsp; (' '|'\t')+ {skip();} ;</span></p>

<p class=MsoNormal><span lang=EN-US>//</span><span style='font-family:宋体'>拷贝结束</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc361871696"><span lang=EN-US>第2小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>运行调试语法文件</span></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>点击</span> <span
style='font-family:宋体'>图标中的小甲虫。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=271
id="图片 37" src="hand%20in%20hand%20with%20antlr.files/image012.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在弹出来的调试界面中，选择</span><span
lang=EN-US> text </span></p>

<p class=MsoNormal><span style='font-family:宋体'>输入</span><span lang=EN-US>
1+2+3*5 </span><span style='font-family:宋体'>之后，还需要输入<span style='color:red'>一个回车换行。</span></span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=375
src="hand%20in%20hand%20with%20antlr.files/image013.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>在就绪的界面中点击</span> <span
lang=EN-US>“</span><span style='font-family:宋体'>执行到底</span><span lang=EN-US>”</span><span
style='font-family:宋体'>的那个按钮，英文提示</span><span lang=EN-US>:”go to end”</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=630
id="图片 43" src="hand%20in%20hand%20with%20antlr.files/image014.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>之后将会在</span><span lang=EN-US>output</span><span
style='font-family:宋体'>窗口看到被识别出来的</span><span lang=EN-US>token</span><span
style='font-family:宋体'>流，和具体语法分析树的结果。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=452
src="hand%20in%20hand%20with%20antlr.files/image015.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>到此，就是简单使用</span><span
lang=EN-US>anltrworks</span><span style='font-family:宋体'>用语法文件来解析输入数据的过程了。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>现在到</span><span lang=EN-US>antlrv3ide
</span><span style='font-family:宋体'>登场了，这个会稍微有点儿麻烦。</span></p>

<h2><a name="_Toc361871697"><span lang=EN-US>第二节<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>再开始品尝</span></a><span lang=EN-US>anltrv3ide</span></h2>

<h3><a name="_Toc361871698"><span lang=EN-US>第1小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>新建一个</span></a><span lang=EN-US>antlr</span><span
style='font-family:宋体'>项目</span><span lang=EN-US>.</span></h3>

<p class=MsoNormal><span style='font-family:宋体'>新建一个名叫</span><span lang=EN-US>antlrdemo</span><span
style='font-family:宋体'>的</span><span lang=EN-US>java</span><span
style='font-family:宋体'>项目</span><span lang=EN-US>,</span><span
style='font-family:宋体'>增加两个目录叫</span><span lang=EN-US>grammar </span><span
style='font-family:宋体'>和</span><span lang=EN-US>lib</span><span
style='font-family:宋体'>，并将</span><span lang=EN-US>antlr.3.3-complete.jar</span><span
style='font-family:宋体'>拷贝到</span><span lang=EN-US>lib</span><span
style='font-family:宋体'>，在</span><span lang=EN-US>jar</span><span
style='font-family:宋体'>包上右键，</span><span lang=EN-US>build Path-&gt; add to
build path</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=478
src="hand%20in%20hand%20with%20antlr.files/image016.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=368 height=276
id="图片 13" src="hand%20in%20hand%20with%20antlr.files/image017.png"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc361871699"><span lang=EN-US>第2小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>创建语法文件</span></a></h3>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h4><span lang=EN-US>第1小小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>选择一</span><span lang=EN-US>:</span><span
style='font-family:宋体'>和</span><span lang=EN-US>antlrworks</span><span
style='font-family:宋体'>中的下载一样</span><span lang=EN-US>.</span></h4>

<p class=MsoNormal><span style='font-family:宋体'>如法炮制，将刚才在</span><span
lang=EN-US>antlrworks</span><span style='font-family:宋体'>中的</span><span
lang=EN-US>Expr.g</span><span style='font-family:宋体'>文件拷贝到</span><span
lang=EN-US>grammar</span><span style='font-family:宋体'>文件夹中</span><span
lang=EN-US>.</span></p>

<h4><span lang=EN-US>第2小小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>选择二</span><span lang=EN-US>:</span><span
style='font-family:宋体'>手工创建</span></h4>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US>grammar</span><span
style='font-family:宋体'>上面右键</span> <span style='font-family:宋体'>，</span><span
lang=EN-US> new -&gt; other,</span><span style='font-family:宋体'>选择</span><span
lang=EN-US> antlr</span><span style='font-family:宋体'>中的</span><span lang=EN-US>
combined grammar</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=460
id="图片 16" src="hand%20in%20hand%20with%20antlr.files/image018.jpg"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>输入</span> <span
style='font-family:宋体'>语法文件名</span><span lang=EN-US>Expr</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=517 height=484
id="图片 19" src="hand%20in%20hand%20with%20antlr.files/image019.png"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>确定后会有一个提示框</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=549 height=174
id="图片 22" src="hand%20in%20hand%20with%20antlr.files/image020.png"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>选择</span><span lang=EN-US>yes</span></p>

<p class=MsoNormal><span style='font-family:宋体;color:red'>此举是配置</span><span
lang=EN-US style='color:red'>antlr</span><span style='font-family:宋体;
color:red'>的</span><span lang=EN-US style='color:red'>jar</span><span
style='font-family:宋体;color:red'>包位置的，必做。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=553 height=265
id="图片 28" src="hand%20in%20hand%20with%20antlr.files/image021.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=498 height=406
id="图片 31" src="hand%20in%20hand%20with%20antlr.files/image022.png"></span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=534
id="图片 34" src="hand%20in%20hand%20with%20antlr.files/image023.jpg"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>设置好后，将例子中的</span><span
lang=EN-US>Expr.g</span><span style='font-family:宋体'>文件的内容</span><span
lang=EN-US>(</span><span style='font-family:宋体'>参照</span><span lang=EN-US>antlrworks</span><span
style='font-family:宋体'>中关于</span><span lang=EN-US>Expr.g</span><span
style='font-family:宋体'>内容</span><span lang=EN-US>)</span><span
style='font-family:宋体'>输入到文件中。</span></p>

<h3><a name="_Toc361871700"><span lang=EN-US>第3小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>进行或者检查插件的设置</span></a><span
lang=EN-US>..</span></h3>

<p class=MsoNormal><span style='font-family:宋体'>在</span><span lang=EN-US>antlrdemo</span><span
style='font-family:宋体'>上右键，选择</span><span lang=EN-US>properties </span><span
style='font-family:宋体'>，在弹出来的对话框中，左边选择</span><span lang=EN-US> antlr</span><span
style='font-family:宋体'>，在右边钩上</span><span lang=EN-US>enable xxx</span><span
style='font-family:宋体'>，</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=553 height=481
id="图片 40" src="hand%20in%20hand%20with%20antlr.files/image024.jpg"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>子节点的各个选项都钩上，</span><span
lang=EN-US>enable</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=433
src="hand%20in%20hand%20with%20antlr.files/image025.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=422
id="图片 46" src="hand%20in%20hand%20with%20antlr.files/image026.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体;color:red'>请注意，此时不要选择</span><span
lang=EN-US style='color:red'> debug</span><span lang=EN-US>,(</span><span
style='font-family:宋体'>原因呢，以后再告诉你</span><span lang=EN-US>…)</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=422
id="图片 49" src="hand%20in%20hand%20with%20antlr.files/image027.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc361871701"><span lang=EN-US>第4小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>编写测试的程序</span></a></h3>

<p class=MsoNormal><span style='font-family:宋体'>如果设置正确</span><span lang=EN-US>,
</span><span style='font-family:宋体'>则会在</span><span lang=EN-US>test</span><span
style='font-family:宋体'>目录下顺利生成两个</span><span lang=EN-US>java</span><span
style='font-family:宋体'>的源码文件</span><span lang=EN-US> ExprLexer.java </span><span
style='font-family:宋体'>和</span><span lang=EN-US> ExprParser.java</span><span
style='font-family:宋体'>。</span><span lang=EN-US>&nbsp; </span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=443 height=405
src="hand%20in%20hand%20with%20antlr.files/image028.png"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果看不到这两个文件，那么随便改动一下</span><span
lang=EN-US>Expr.g</span><span style='font-family:宋体'>文件</span> <span
style='font-family:宋体'>，如果配置全都正确的话，保存即可自动生成这两个源代码文件，如果配置不正确，那请</span><span
lang=EN-US>google</span><span style='font-family:宋体'>之。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>建立一个</span><span lang=EN-US>TestRun.java</span><span
style='font-family:宋体'>的测试程序</span><span lang=EN-US>,(</span><span
style='font-family:宋体'>可以比对一下这个文件和</span><span lang=EN-US>D:\antlrdemo\antlrworks_data\output\</span><span
lang=EN-US> </span><span lang=EN-US>__Test__.java</span><span style='font-family:
宋体'>的异同，这以让你一窥</span><span lang=EN-US>antlr</span><span style='font-family:
宋体'>的调试功能的实现</span><span lang=EN-US>)</span><span style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=659
src="hand%20in%20hand%20with%20antlr.files/image029.png"></span></p>

<div style='border:none;border-bottom:double windowtext 2.25pt;padding:0cm 0cm 1.0pt 0cm'>

<p class=MsoNormal style='border:none;padding:0cm'><span lang=EN-US>TestRun.java</span><span
style='font-family:宋体'>的文件内容</span><span lang=EN-US>:</span></p>

</div>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><b><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:#7F0055'>package</span></b><span lang=EN-US
style='font-size:10.0pt;font-family:"Courier New";color:black'> test;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><b><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:#7F0055'>import</span></b><span lang=EN-US
style='font-size:10.0pt;font-family:"Courier New";color:black'> <u>java.io</u>.*;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><b><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:#7F0055'>import</span></b><span lang=EN-US
style='font-size:10.0pt;font-family:"Courier New";color:black'> org.antlr.runtime.*;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><b><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:#7F0055'>public</span></b><span lang=EN-US
style='font-size:10.0pt;font-family:"Courier New";color:black'> </span><b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:#7F0055'>class</span></b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:black'>
TestRun {</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp; </span><b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:#7F0055'>public</span></b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:black'> </span><b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:#7F0055'>static</span></b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:black'> </span><b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:#7F0055'>void</span></b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:black'>
main(String[] args) {</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ExprLexer lex = </span><b><span lang=EN-US style='font-size:10.0pt;font-family:
"Courier New";color:#7F0055'>new</span></b><span lang=EN-US style='font-size:
10.0pt;font-family:"Courier New";color:black'> ExprLexer(</span><b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:#7F0055'>new</span></b><span
lang=EN-US style='font-size:10.0pt;font-family:"Courier New";color:black'>
ANTLRStringStream(</span><span lang=EN-US style='font-size:10.0pt;font-family:
"Courier New";color:#2A00FF'>&quot;1+2+3\n&quot;</span><span lang=EN-US
style='font-size:10.0pt;font-family:"Courier New";color:black'>));</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
CommonTokenStream tokens = </span><b><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:#7F0055'>new</span></b><span lang=EN-US
style='font-size:10.0pt;font-family:"Courier New";color:black'>
CommonTokenStream(lex);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New"'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
ExprParser g = </span><b><span lang=EN-US style='font-size:10.0pt;font-family:
"Courier New";color:#7F0055'>new</span></b><span lang=EN-US style='font-size:
10.0pt;font-family:"Courier New";color:black'> ExprParser(tokens);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span><b><span lang=EN-US style='font-size:10.0pt;font-family:"Courier New";
color:#7F0055'>try</span></b><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'> {</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
g.prog();</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
} </span><b><span lang=EN-US style='font-size:10.0pt;font-family:"Courier New";
color:#7F0055'>catch</span></b><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'> (Exception e) {</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
e.printStackTrace();</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;&nbsp;&nbsp; }</span></p>

<div style='border:none;border-bottom:double windowtext 2.25pt;padding:0cm 0cm 1.0pt 0cm'>

<p class=MsoNormal style='border:none;padding:0cm'><span lang=EN-US
style='font-size:10.0pt;line-height:115%;font-family:"Courier New";color:black'>}</span></p>

</div>

<p class=MsoNormal><span style='font-size:10.0pt;line-height:115%;font-family:
宋体;color:black'>保存，后运行，会输出以下日志</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter INT 1 line=1:0</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit INT + line=1:1</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter prog [@0,0:0='1',&lt;6&gt;,1:0]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter stat [@0,0:0='1',&lt;6&gt;,1:0]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter expr [@0,0:0='1',&lt;6&gt;,1:0]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter multExpr
[@0,0:0='1',&lt;6&gt;,1:0]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter atom [@0,0:0='1',&lt;6&gt;,1:0]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter T__9 + line=1:1</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit T__9 2 line=1:2</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit atom [@1,1:1='+',&lt;9&gt;,1:1]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit multExpr [@1,1:1='+',&lt;9&gt;,1:1]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter INT 2 line=1:2</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit INT </span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;line=1:3</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter multExpr
[@2,2:2='2',&lt;6&gt;,1:2]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter atom [@2,2:2='2',&lt;6&gt;,1:2]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>enter NEWLINE </span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>&nbsp;line=1:3</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit NEWLINE ? line=2:0</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit atom [@3,3:3='\n',&lt;4&gt;,1:3]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit multExpr
[@3,3:3='\n',&lt;4&gt;,1:3]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit expr [@3,3:3='\n',&lt;4&gt;,1:3]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>3</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal;text-autospace:none'><span lang=EN-US style='font-size:10.0pt;
font-family:"Courier New";color:black'>exit stat
[@4,4:4='&lt;EOF&gt;',&lt;-1&gt;,2:0]</span></p>

<p class=MsoNormal><span lang=EN-US style='font-size:10.0pt;line-height:115%;
font-family:"Courier New";color:black'>exit prog
[@4,4:4='&lt;EOF&gt;',&lt;-1&gt;,2:0]</span></p>

<p class=MsoNormal><span style='font-size:10.0pt;line-height:115%;font-family:
宋体;color:black'>这些日志信息代表的含义将会在使用进阶里面解释，需要关注的是倒数第三行</span><span
style='font-size:10.0pt;line-height:115%;font-family:"Courier New";color:black'>
</span><span style='font-size:10.0pt;line-height:115%;font-family:宋体;
color:black'>数字</span><span lang=EN-US style='font-size:10.0pt;line-height:
115%;font-family:"Courier New";color:black'>3</span><span style='font-size:
10.0pt;line-height:115%;font-family:宋体;color:black'>，这个是输出的结构，你可以通过配置选项关闭其他信息的输出，只保留结果的输出，这些将会在</span><span
lang=EN-US style='font-size:10.0pt;line-height:115%;font-family:"Courier New";
color:black'>antlr</span><span style='font-size:10.0pt;line-height:115%;
font-family:宋体;color:black'>的配置项中给以解释。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc361871702"><span lang=EN-US>第三节<span style='font:7.0pt "Times New Roman"'>
</span></span><span lang=EN-US>Antlrworks</span></a><span style='font-family:
宋体'>工具的各部分使用说明</span></h2>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=334
id="图片 52" src="hand%20in%20hand%20with%20antlr.files/image030.jpg"></span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>语法元素大纲图</span></b><b><span
lang=EN-US>:</span></b><span lang=EN-US> </span><span style='font-family:宋体'>将语法文件的语法元素以大纲的方式列在左边。上面还有一个左右箭头按钮，用来在语法元素间切换的。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>语法文件编辑器：</span></b><span
style='font-family:宋体'>编辑语法文件，与普通的编辑器无异，多了一个输入时，会自动对齐的功能。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>语法高亮按钮：</span></b><span
style='font-family:宋体'>控制语法编辑器是否高亮显示语法关键字。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>调试快速按钮</span></b><b><span
lang=EN-US>:</span></b><span style='font-family:宋体'>这个可以在菜单中找到，但经常用，就列在了界面上。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>调试按钮</span></b><b><span
lang=EN-US>:</span></b><span style='font-family:宋体'>调试时候，进行单步前进，单步后退，回到最开始位置，或者执行到最后位置。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>中断事件激发点：</span></b><span
style='font-family:宋体'>设置什么时候进行发出调试中断陷阱信号给调试器。默认设置为</span><span lang=EN-US>token</span><span
style='font-family:宋体'>消耗时，也就是当一个词法被识别出来的时候，形成一个</span><span lang=EN-US>token</span><span
style='font-family:宋体'>被语法调用消耗时，触发调试中断陷阱。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>输入</span></b><b><span
lang=EN-US>/</span></b><b><span style='font-family:宋体'>输出窗口</span></b><b><span
lang=EN-US>:</span></b><span style='font-family:宋体'>输入输出窗口共用一块显示区域，不能同时显示，任意一个时间，最多只能显示其中的一个。输入输出窗口的作用主要是关于输入流的显示和被辨认出来的</span><span
lang=EN-US>token</span><span style='font-family:宋体'>流的输出，由于是</span><span
lang=EN-US>ll(k)</span><span style='font-family:宋体'>算法</span> <span lang=EN-US>(
ll(k) </span><span style='font-family:宋体'>的意思是</span><span lang=EN-US>&nbsp;scans
input from left-to-right, produces a leftmost derivation top-down, k symbols of
lookahead .</span><span style='font-family:宋体'>而</span><span lang=EN-US>lr(k)</span><span
style='font-family:宋体'>的意思是</span><span lang=EN-US>a grammar in which purser
scans the input from left to right and generate the reverse rightmost derivation,
and it can take a decision about reduction by looking next k symbol only. That
is why; it is called LR (k) grammar.),</span><span style='font-family:宋体'>所以这两者几乎都是同步的，但由于可能会存在一些</span><span
lang=EN-US>token</span><span style='font-family:宋体'>被</span><span lang=EN-US>skip</span><span
style='font-family:宋体'>或者</span><span lang=EN-US>hide</span><span
style='font-family:宋体'>了，所以，</span><span lang=EN-US>output</span><span
style='font-family:宋体'>的窗口内容会少于</span><span lang=EN-US>input</span><span
style='font-family:宋体'>窗口内容。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>分析树和抽象语法树窗口</span></b><b><span
lang=EN-US>:</span></b><span lang=EN-US> </span><span style='font-family:宋体'>以树状的形式来展现解析的结果，分析树贴近源语法，是源语法的一个直接映射，抽象语法语法树是对源语法进行抽象后的一个体现。比如，一般整数和实数，在分析树中会对应不同的类型，但是在抽象语法树中，可能会被抽象成操作数这样的统一类型。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>堆栈和事件窗口</span></b><b><span
lang=EN-US>:</span></b><span style='font-family:宋体'>堆栈窗口展现语法规则被访问的深度关系。就像函数的调用堆栈一样。事件窗口展现每一步发生的事件，比如进入那一个规则，消耗那一些</span><span
lang=EN-US>token</span><span style='font-family:宋体'>等。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>语法图窗口</span><span lang=EN-US>:</span><span
style='font-family:宋体'>默认以</span><span lang=EN-US>bnf</span><span
style='font-family:宋体'>图方式展示语法规则。</span><span lang=EN-US>Show nfa</span><span
style='font-family:宋体'>可以选择是否显示非确定型状态机。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=553 height=140 id="图片 1"
src="hand%20in%20hand%20with%20antlr.files/image031.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>解释器窗口</span><span lang=EN-US>:</span><span
style='font-family:宋体'>可以单独调试某一条规则。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc361871703"><span lang=EN-US>第四节<span style='font:7.0pt "Times New Roman"'>
</span></span><span lang=EN-US>Antlrv3ide</span></a><span style='font-family:
宋体'>插件的各部分使用说明</span></h2>

<p class=MsoNormal><span style='font-family:宋体'>双击</span><span lang=EN-US>Expr.g</span><span
style='font-family:宋体'>文件，即可进入</span><span lang=EN-US>antlrv3ide</span><span
style='font-family:宋体'>的插件关联的视图。下面是各组成部分的说明。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>语法编辑器区：这部分只是辅助编辑</span><span
lang=EN-US>.g</span><span style='font-family:宋体'>的语法文件。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=354 id="图片 4"
src="hand%20in%20hand%20with%20antlr.files/image032.jpg"></span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>解释调试区</span></b><b><span
lang=EN-US>: </span></b><span style='font-family:宋体'>这部分可以解释调试各种规则。选择需要调试的的规则，在输入区输入待调试的字符串，</span>
<span style='font-family:宋体'>点击运行按钮，就可以在输出区看到具体语法树或者问题了。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果有需要，还可以以新建用例的方式将该次测试保存为</span><span
lang=EN-US>gunit</span><span style='font-family:宋体'>测试用例。以供多次测试用。</span><span
lang=EN-US>Gunit</span><span style='font-family:宋体'>用例可以转化成</span><span
lang=EN-US>junit</span><span style='font-family:宋体'>用例</span><span lang=EN-US>….</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=292 id="图片 7"
src="hand%20in%20hand%20with%20antlr.files/image033.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=360
id="图片 10" src="hand%20in%20hand%20with%20antlr.files/image034.jpg"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc361871704"><span lang=EN-US>第四章 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>使用篇</span></a></h1>

<p class=MsoNormal><span style='font-family:宋体'>在安装完成后，并通过简单的使用，熟悉了</span><span
lang=EN-US>antlr</span><span style='font-family:宋体'>工具</span><span lang=EN-US>antlrworks</span><span
style='font-family:宋体'>以及插件</span><span lang=EN-US>antlrv3ide</span><span
style='font-family:宋体'>的各部分，已利其器了，剩下的就是如何欲善其事了。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>本篇的安排拟这样</span><span
lang=EN-US>: </span><span style='font-family:宋体'>先吹吹水，了解一下一些历史典故，然后对一些基本概念作一个大体介绍，对经典的表达式进行剖析，再安排一个具体的场景《状态机代码生成框架》，中间会穿插一些编译原理知识。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>通过本篇的学习后，你应该能够使用</span><span
lang=EN-US>antlr</span><span style='font-family:宋体'>把工作中需求转化成设计，如果不能，就给我来</span><span
lang=EN-US>email</span><span style='font-family:宋体'>吧，我们一起探讨一下如何改进这个教程。</span></p>

<h2><a name="_Toc361871705"><span lang=EN-US>第一节<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>无责任乱弹</span></a></h2>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>一般古代出征时总会祭拜先祖或者什么大神之类的，求乞庇护。这里我们也烧几柱香来拜祭一下相关的先祖们。</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>上一个世纪是一个伟人井喷的世纪</span><span
lang=EN-US>.</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>希尔伯特提出了著名的</span><span
lang=EN-US>23</span><span style='font-family:宋体'>个著名的问题</span><span lang=EN-US>,</span><span
style='font-family:宋体'>在第二个问题中，并企图建立一套完备的独立的相容的公理体系</span><span lang=EN-US>,</span><span
style='font-family:宋体'>使得一起的数学命题在这套公理体系内经过有限步骤地推导都能得到真伪的判断，这个世界大同式得梦想让当时所有的数学家都振奋不已。但在</span><span
lang=EN-US>1931</span><span style='font-family:宋体'>年，哥德尔不完备定理的出现，让这一共产主义式的梦想破灭。哥德尔令人信服的证明了：任何相容</span><span
lang=EN-US>(</span><span style='font-family:宋体'>无矛盾</span><span lang=EN-US>)</span><span
style='font-family:宋体'>的公理系统，只要包含初等算术的陈述，必定存在一个不可判定的问题，用这组公理不能判断其真假。也就是说，“相容”和“完备”犹如鱼和熊掌，不可得而兼之。吹开迷雾后才发现理想的公理系统就像一件捉襟见肘的华丽外衣。</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span lang=EN-US>1936</span><span
style='font-family:宋体'>年，图灵和邱奇为了第</span><span lang=EN-US>10</span><span
style='font-family:宋体'>个问题，分别构造了两种殊途同归的计算模型，图灵机和</span><span lang=EN-US>lambda</span><span
style='font-family:宋体'>算子</span><span lang=EN-US>(</span><span
style='font-family:宋体'>貌似还有一个数学家提出了递归函数</span><span lang=EN-US>)</span><span
style='font-family:宋体'>。图灵机以感性直观的方式展现了逻辑的机械性质，而</span><span lang=EN-US>lambda</span><span
style='font-family:宋体'>算子则以理性的方式揭示了逻辑的抽象变换本质。图灵停机问题和</span><span lang=EN-US>lambda</span><span
style='font-family:宋体'>算子中的不动点算子</span><span lang=EN-US>(Y combinator)</span><span
style='font-family:宋体'>为哥德尔德不完备定理提供了有力的佐证。</span><span lang=EN-US>(</span><span
style='font-family:宋体'>图灵机和</span><span lang=EN-US>lambda</span><span
style='font-family:宋体'>算子之于计算理论与波粒二象性之于物理比较像</span><span lang=EN-US>,</span><span
style='font-family:宋体'>在基本粒子身上同时体现出了两种特性</span><span lang=EN-US>)</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>图灵的计算模型将思维的运动转化成了机械的运动方式，为计算机的制造提供了可能。</span><span
lang=EN-US>1944 </span><span style='font-family:宋体'>，冯诺依曼要计算原子弹的反应传播雇佣了</span><span
lang=EN-US>100</span><span style='font-family:宋体'>多名女计算员，日以继夜的计算仍然不能满足计算需求，偶然机会他了解到了</span><span
lang=EN-US>ENIAC</span><span style='font-family:宋体'>计算机的研制计划，很感兴趣，改造了一下，用逻辑等价的稳定可靠的基于二进制设计的电路</span>
<span style='font-family:宋体'>代替了复杂的多进制逻辑电路，成了，然后再给那台机器加了个内存条，就变成了传说中的冯诺依曼机（笑侃，莫当真，冯诺依曼机是指一种结构）。</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>有了计算机，自然就催生了程序设计语言，甚至在还没有计算机之前，就已经有了程序员，第一个程序员是一个非常有才华的美女</span><span
lang=EN-US>:Ada</span><span style='font-family:宋体'>，拜伦的女儿。这世界上，聪明的女人本来就很少，美丽的聪明女人更是少之又少。可惜英年早逝，三十六岁就</span><span
lang=EN-US>down</span><span style='font-family:宋体'>掉了，每每想起此事，未免黯然叹息，天妒红颜阿。但她天才的预见留存来下来，并在之后的一百多年后一一得到验证。每次读到这个</span><span
lang=EN-US>ada</span><span style='font-family:宋体'>这个单词就</span> <span
style='font-family:宋体'>仿佛看到在皎洁的月光下，有一名婉约的女子，站在世界之巅瞻望，她火热眼睛里面映照着单调的</span><span
lang=EN-US>01</span><span style='font-family:宋体'>世界精彩的未来，在那里不仅有子程序，流程图，还有音乐，图画</span><span
lang=EN-US>….</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>在描述程序设计语言的本身的时候，不可避免地涉及到巴克斯</span><span
lang=EN-US>-</span><span style='font-family:宋体'>诺尔范式</span><span lang=EN-US>.</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>半路出家貌似是很多大拿的路子。或许是因为他们的聪明才智是特地为计算机而生的，之前，都是在为遇见的那一刻准备。巴克斯和诺尔就是这样的仁兄。</span>
</p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>据说巴克斯年少时不爱读书，混了个中学毕业。在大学时由于无知选择了化学，但也没怎么学好</span><span
lang=EN-US>...(</span><span style='font-family:宋体'>感谢当年同学的不杀之恩哪。要不编程语言历史得倒退多少年阿</span><span
lang=EN-US>)</span><span style='font-family:宋体'>，不过却年少方刚比较热血，二战时头脑一热跑去当陆军医疗兵了，在这中间检查出了脑瘤，接受了手术。兵是当不成了，鬼子也是打不了了，但光活着也不是办法，于是他想转职做个无线电工了此残生算了。在上岗前的培训中，忽然着了魔般的对数学感兴趣了，</span><span
lang=EN-US>(</span><span style='font-family:宋体'>鬼知道是不是那个脑瘤影响了他大脑的结构</span><span
lang=EN-US>)</span><span style='font-family:宋体'>，后来回炉考研重造，学成后跑去</span><span
lang=EN-US>IBM</span><span style='font-family:宋体'>，后来的事，大家都知道了</span><span
lang=EN-US>....</span><span style='font-family:宋体'>就这样一代天才终于找到了自己的天赋和使命，找到了上帝交给他的任务，开发了第一个高级编程语言，并抽象出了一个描述高级程序设计语言的规范</span><span
lang=EN-US>:</span><span style='font-family:宋体'>巴克斯范式。</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>诺尔更是一个意外的客串</span><span
lang=EN-US>.</span><span style='font-family:宋体'>丫当时根本就没想过要在计算机界闯出个名堂来，而醉心于夜观天象。他本职也是一个天文学家，由于需要处理大量的天文数据，也就被逼成了计算机专家。在巴黎的著名的</span><span
lang=EN-US>algol</span><span style='font-family:宋体'>大会上，诺尔大幅度的简化了巴斯克范式，并作为大会总结人用它优雅简洁的描述了</span><span
lang=EN-US>algol</span><span style='font-family:宋体'>的特性，于是就产生了那份在编程语言史上有划时代意义的</span><span
lang=EN-US>&lt;</span><span style='font-family:宋体'>算法语言</span><span lang=EN-US>algol60</span><span
style='font-family:宋体'>报告</span><span lang=EN-US>&gt;</span><span
style='font-family:宋体'>，这个报告展示了从接近人类语言的视角去和机器沟通，而不是用机器语言的视角去和机器沟通的方式。换句话说，他们成功的让所有的开发活动从以机器为中心转移到了以人的逻辑思维为中心，从此解放了机器特性对人的思维逻辑的束缚，这是个了不起的质的飞跃，就像从活着是为了吃饭跃迁到吃饭是为了活着的境界。</span>
</p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>诺尔还是一个才华横溢的人，足迹涉及了天文学，心理学，生物学，古典音乐等，但在其他领域都不如他在计算机上的名声大，后来也就慢慢的专业搞计算机了。还有一点有意思的是，诺尔虽然得了图灵奖，但却始终不承认图灵关于人工智能的想法。世界上的事往往都是这么赶巧，无心插柳的，却荫了一大片。宿命阿。</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>接着该到乔姆斯基出场了。我眼中的乔大叔堪比金庸笔下的风清扬。他虽然不是计算机科学家，只是哲学家和语言学家，但他成功地把语法结构统一到了状态机的计算模型上来，向世人揭示了语法的数学本质。在没有看到乔姆斯基的形式文法前，我从未意识到感性的语言还有这么理性的内涵。当然这中间可能很多都是来自于他的老师哈里斯关于语言结构</span><span
lang=EN-US><a
href="http://zh.wikipedia.org/wiki/%E7%BA%BF%E6%80%A7%E7%AE%97%E5%AD%90"
title=线性算子><span lang=EN-US style='font-family:宋体;color:windowtext;text-decoration:
none'><span lang=EN-US>线性算子</span></span></a></span><span style='font-family:
宋体'>方面的发现。</span></p>

<p class=MsoNormal style='text-indent:24.0pt'><span style='font-family:宋体'>好了，祭祀大典结束</span><span
lang=EN-US>...</span><span style='font-family:宋体'>接下来我们该分猪肉了。</span></p>

<h2><a name="_Toc361871706"><span lang=EN-US>第二节<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>关于语法解析的一些基本概念</span></a></h2>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>虽然现代语文到处都是主谓宾什么的，但是很奇怪，在古代却鲜有分析语法的，说文解字的很多，谋篇布局的也很多，可是研究语法的却很少，貌似这是一个很自然的事情，这件事确实好玩，古人的文章都是没有标点的，全靠语义断句，和现代的先判断语法再判断语义几乎是违背的。后来马建忠照着西方的语法研究体系框架，对中文做了一个全面的审视，横空出了一本</span><span
lang=EN-US>&lt;</span><span style='font-family:宋体'>马氏文通</span><span lang=EN-US>&gt;</span><span
style='font-family:宋体'>，奠定了现代汉语研究的基础。但是这种词本位的研究方法，终究不是太合适，以至于到了现在，都还没有一种靠谱的分词方法，那些号称准确到</span><span
lang=EN-US>95%</span><span style='font-family:宋体'>以上的多数都是基于统计的方法，也就是说，它们的本质基本都是基于现有使用频率而定，不具备推导性。我隐隐约约的感觉到</span><span
lang=EN-US>(ps:</span><span style='font-family:宋体'>只是隐隐约约的感觉到</span><span
lang=EN-US>)</span><span style='font-family:宋体'>，中文体系的机制有点类似</span><span
lang=EN-US>lambda</span><span style='font-family:宋体'>算子，英文体系的机制有点象图灵机体系。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; :) </span><span
style='font-family:宋体'>扯了那么多，是想告诉你</span><span lang=EN-US>... </span><span
style='font-family:宋体'>本教程不打算研究中文，哈哈。如果你打算做中文语法解析，下面的内容，你可以不用看了。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span><span style='font-family:
宋体'>本篇并不打算以严格的形式介绍编译原理的前端的内容，因为，严格的话也是抄龙虎鲸书等</span><span lang=EN-US>,</span><span
style='font-family:宋体'>而且，愿意啃哪几本书的，基本也用不着本教程了。也就从需求的角度信手即乱弹了。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span><span style='font-family:
宋体'>通常，我们要表达一个系统的观点，都会用文章来表达，一篇文章，是由若干个段落组成，</span> <span style='font-family:
宋体'>段落是有若干有逻辑联系的句子组成。句子是有若干词语构成的，就像一层一层的洋葱。</span> <span style='font-family:
宋体'>词语或者叫单词就是那些无法再拆分的最小的具有概念意义的单位。词语是由字母有序组成的，但字母不具备概念意义。到了这里，就有了一条严格的分水线了</span><span
lang=EN-US>.... </span><span style='font-family:宋体'>以单词为分界线，单词之上的，组成结构的元素都是具有概念意义的。单词以下，组成结构的元素都是没有概念意义的。（请再一次注意，我说的是英文体系的</span><span
lang=EN-US>...</span><span style='font-family:宋体'>不是中文体系</span><span
lang=EN-US>) </span><span style='font-family:宋体'>于是这里就引出了两个概念，词法分析和语法分析。</span></p>

<h3><a name="_Toc361871707"><span lang=EN-US>第1小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>什么是词法分析，什么是语法分析，这两者有什么不同？</span></a></h3>

<p class=MsoNormal><b><span style='font-family:宋体'>词法分析</span></b><b><span
lang=EN-US>:</span></b><span style='font-family:宋体'>一门研究无意义的字母如何组成有意义的单词的技术。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>语法分析</span></b><b><span
lang=EN-US>:</span></b><span style='font-family:宋体'>一门研究有意义的单词如何组成更复杂意义的句子，文章的技术。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>例子</span><span lang=EN-US>: </span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; hello,my name is alan, i
come from china.</span></p>

<p class=MsoNormal><span style='font-family:宋体'>以上是一个自我介绍的片段。</span> </p>

<p class=MsoNormal><span style='font-family:宋体'>词法分析是识别出一个一个的单词</span> <span
style='font-family:宋体'>比如</span><span lang=EN-US>hello</span><span
style='font-family:宋体'>，</span><span lang=EN-US> my</span><span
style='font-family:宋体'>等。</span> <span style='font-family:宋体'>单个的</span><span
lang=EN-US> h</span><span style='font-family:宋体'>，</span><span lang=EN-US>e
,l,l,o </span><span style='font-family:宋体'>是不具备概念意义的，</span> <span
style='font-family:宋体'>只有有序组成</span><span lang=EN-US>hello</span><span
style='font-family:宋体'>的时候才具备一个概念意义。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>那语法分析又是什么呢？</span> <span
style='font-family:宋体'>我们假定这是一个标准的自我介绍的文章。这个文章由三段组成：问候语，名字介绍，归属地介绍</span><span
lang=EN-US> :) . </span></p>

<p class=MsoNormal><span style='font-family:宋体'>问候语采用</span><span lang=EN-US>
hello </span><span style='font-family:宋体'>或者</span><span lang=EN-US> hello xxx </span><span
style='font-family:宋体'>的形式。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>名字介绍采用</span><span lang=EN-US>&nbsp;
my name is xxx </span><span style='font-family:宋体'>的形式。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>归属地介绍采用</span><span lang=EN-US>
i come from xxx</span><span style='font-family:宋体'>的形式。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>那我们规定的这种标准介绍的格式，就是所谓的语法，每一条叫语法规则。</span>
<span style='font-family:宋体'>我们通常意义上的英文语法，本质上也是这样的，但他们的语法结构层次多点，各组成部分的划分多些和标准些。我们常说的英语句式，就是所谓的语法，但是语法不仅仅包括句式，还包括篇章段落结构等。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span><span style='font-family:
宋体'>比如一个最简单的英语句式</span><span lang=EN-US>:</span><span style='font-family:宋体'>主语谓语宾语。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp; </span><span style='font-family:
宋体'>主语由名词或者代词组成。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp; </span><span style='font-family:
宋体'>谓语由动词组成。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp; </span><span style='font-family:
宋体'>宾语由名词或者代词组成。</span> </p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>以下为简单起见就假设各个结构组成成分最多只有两个吧。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>名词：</span></b><span
style='font-family:宋体'>专有名词或者普通名词。</span><span lang=EN-US>(</span><span
style='font-family:宋体'>参见</span><span lang=EN-US>http://baike.baidu.com/view/26580.htm)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>专有名词：常见的人名或者地名</span><span
lang=EN-US>:</span><span style='font-family:宋体'>也见字典的专有名词列表。如</span><b><span
lang=EN-US>China</span></b><span style='font-family:宋体'>（</span><span
lang=EN-US><a href="http://baike.baidu.com/view/61891.htm" target="_blank"><span
lang=EN-US style='font-family:宋体'><span lang=EN-US>中国</span></span></a></span><span
style='font-family:宋体'>）、</span><b><span lang=EN-US>Asia</span></b><span
style='font-family:宋体'>（</span><span lang=EN-US><a
href="http://baike.baidu.com/view/2918.htm" target="_blank"><span lang=EN-US
style='font-family:宋体'><span lang=EN-US>亚洲</span></span></a></span><span
style='font-family:宋体'>）</span><b><span lang=EN-US>Beijing</span></b><span
style='font-family:宋体'>（</span><span lang=EN-US><a
href="http://baike.baidu.com/view/2621.htm" target="_blank"><span lang=EN-US
style='font-family:宋体'><span lang=EN-US>北京</span></span></a></span><span
style='font-family:宋体'>）</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>普通名词</span></b><b><span
lang=EN-US>:</span></b><span style='font-family:宋体'>个体名词或者物质名词。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>个体名词</span></b><b><span
lang=EN-US>: </span></b><span style='font-family:宋体'>单个人或者物的名词，如</span><span
lang=EN-US>car </span><span style='font-family:宋体'>汽车</span><span lang=EN-US>
room </span><span style='font-family:宋体'>房间</span><span lang=EN-US> fan </span><span
style='font-family:宋体'>风扇</span><span lang=EN-US>photo </span><span
style='font-family:宋体'>照片等。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>物质名词</span></b><b><span
lang=EN-US>: </span></b><span style='font-family:宋体'>表示物质或不具备确定形状和大小的个体的物质。</span><span
lang=EN-US>fire </span><span style='font-family:宋体'>火</span><span lang=EN-US>
steel </span><span style='font-family:宋体'>钢</span><span lang=EN-US> air </span><span
style='font-family:宋体'>空气</span><span lang=EN-US> water </span><span
style='font-family:宋体'>水</span><span lang=EN-US> milk</span><span
style='font-family:宋体'>牛奶。</span></p>

<p class=MsoNormal><b><span style='font-family:宋体'>动词</span></b><b><span
lang=EN-US>:</span></b><span style='font-family:宋体'>表示动作的词语。</span> <span
style='font-family:宋体'>一般见字典的动词表，比如</span><span lang=EN-US>is </span><span
style='font-family:宋体'>，</span><span lang=EN-US>do</span><span
style='font-family:宋体'>，</span><span lang=EN-US> make </span><span
style='font-family:宋体'>等等。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>代词</span><span lang=EN-US>: it</span><span
style='font-family:宋体'>，</span><span lang=EN-US>i</span><span style='font-family:
宋体'>，</span><span lang=EN-US> she</span><span style='font-family:宋体'>，</span><span
lang=EN-US>he</span><span style='font-family:宋体'>等词语。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>也就是说，这个经过阉割的简单的主谓宾的句式，语法结构是这样的</span><span
lang=EN-US>:</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=495 height=207
src="hand%20in%20hand%20with%20antlr.files/image035.png"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>椭圆框内的是字母序列，是具体的单词例子。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>方框是作为语法分析的基本单位，是词法分析出来的最后终结果。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>圆角框是符合的语法结构。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>像</span><span lang=EN-US> it is
tree </span><span style='font-family:宋体'>，就是这样的结构。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=235 height=207
src="hand%20in%20hand%20with%20antlr.files/image036.png"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>那如何来描述词法语法规则呢？</span> <span
style='font-family:宋体'>这就涉及到了鼎鼎有名的巴克斯</span><span lang=EN-US>-</span><span
style='font-family:宋体'>诺尔范式。</span></p>

<h3><a name="_Toc361871708"><span lang=EN-US>第2小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>巴克斯</span></a><span lang=EN-US>-</span><span
style='font-family:宋体'>诺尔范式</span><span lang=EN-US>,</span><span
style='font-family:宋体'>产生式</span><span lang=EN-US>,</span><span
style='font-family:宋体'>最左推导</span><span lang=EN-US>,</span><span
style='font-family:宋体'>最右推导</span><span lang=EN-US>,</span><span
style='font-family:宋体'>左递归</span><span lang=EN-US>,</span><span
style='font-family:宋体'>右递归</span></h3>

<p class=MsoListParagraphCxSpFirst style='margin-left:21.0pt'><span
style='font-family:宋体'>巴克斯发明了一种叫巴克斯范式</span><span lang=EN-US>(<span
class=langwithname>Backus Normal Form</span>)</span><span style='font-family:
宋体'>的格式来标示语法词法，语法词法本质上其实是一样的，不过是组成单位是否有逻辑概念意义而已。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>巴克斯范式后经诺尔改进，后人便合成巴克斯</span><span lang=EN-US>-</span><span
style='font-family:宋体'>诺尔范式</span><span lang=EN-US> (</span><span
class=langwithname><span lang=EN-US>Backus-Naur Form</span></span><span
lang=EN-US>)</span><span style='font-family:宋体'>简称都是叫</span><span lang=EN-US>BNF</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>这个范式很简单</span><span lang=EN-US>(</span><span
style='font-family:宋体'>见</span><span lang=EN-US>http://zh.wikipedia.org/zh-cn/%E5%B7%B4%E7%A7%91%E6%96%AF%E8%8C%83%E5%BC%8F)</span><span
style='font-family:宋体'>，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>规定了一个语法结构的描述是由一堆语法规则组成，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>每一个规则符合这样的格式</span><span lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&lt;</span><span style='font-family:宋体'>符号</span><span lang=EN-US>&gt;
::= &lt;</span><span style='font-family:宋体'>使用符号的表达式</span><span lang=EN-US>&gt;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>这里的</span><span lang=EN-US> &lt;</span><span
style='font-family:宋体'>符号</span><span lang=EN-US>&gt; </span><span
style='font-family:宋体'>是非终结符，而表达式由一个符号序列，或用指示选择的竖杠</span><span lang=EN-US> '|' </span><span
style='font-family:宋体'>分隔的多个符号序列构成，<span style='color:red'>每个符号序列整体都是左端的符号的一种可能的替代</span>。<span
style='color:red'>从未在左端出现的符号叫做终结符</span>。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>具体可以解读成</span><span lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&lt;</span><span style='font-family:宋体'>非终结符</span><span lang=EN-US>&gt;
::= &lt;</span><span style='font-family:宋体'>可能选择表达式</span><span lang=EN-US>1&gt;
| &lt;</span><span style='font-family:宋体'>可能选择表达式</span><span lang=EN-US>2&gt;...</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>BNF</span><span style='font-family:宋体'>在描述上是存在着一些缺陷的，</span> <span
style='font-family:宋体'>它无力描述它所占用的</span><span lang=EN-US>&lt;&gt; ::= | </span><span
style='font-family:宋体'>等字符，用现在的话说是没有转义功能。另外，它对可选结构</span><span lang=EN-US>(</span><span
style='font-family:宋体'>可有可无的选项</span><span lang=EN-US>)</span><span
style='font-family:宋体'>以及重复项的描述很罗嗦。于是就有了</span><span lang=EN-US>EBNF(</span><span
style='font-family:宋体'>扩展巴克斯范式</span><span lang=EN-US>)</span><span
style='font-family:宋体'>的出现。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>具体看</span><span lang=EN-US>(http://zh.wikipedia.org/wiki/%E6%89%A9%E5%B1%95%E5%B7%B4%E7%A7%91%E6%96%AF%E8%8C%83%E5%BC%8F).</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>现在常用的，基本都</span><span lang=EN-US>EBNF</span><span
style='font-family:宋体'>的格式，但</span><span lang=EN-US>BNF</span><span
style='font-family:宋体'>和</span><span lang=EN-US>EBNF </span><span
style='font-family:宋体'>两者能力等价。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>一般采用产生式来做语法推导，可以认为产生式其实就是</span><span
lang=EN-US>BNF</span><span style='font-family:宋体'>的一条规则的另一种表达方式。产生式采用</span><span
lang=EN-US>&nbsp; </span><span style='font-family:宋体'>前提条件</span><span
lang=EN-US>-&gt;</span><span style='font-family:宋体'>结论动作</span> <span
style='font-family:宋体'>这样的表达方式。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>采用这种产生式的规则，可以很好的诠释语法的推导过程。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>比如有一个这样的规则集合</span><span lang=EN-US>:&nbsp; {S-&gt;AB,A-&gt;a,
B-&gt;b } </span><span style='font-family:宋体'>要分析的字符串</span><span lang=EN-US>
SB</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>最左推导是</span><span
lang=EN-US>:&nbsp; SB-&gt;ABB-&gt;aBB-&gt;abB-&gt;abb;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>最右推导是</span><span
lang=EN-US>:&nbsp; SB-&gt;Sb-&gt;ABb-&gt;Abb-&gt;abb;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>他们的区别是很简单的</span> <span style='font-family:宋体'>从左边还是从右边开始按照规则替换。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>在替换的过程中，可能会遭遇左递归或者右递归的情况，左递归是相对最左推导而产生的，右递归是相对最右推导而产生的。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>举例说明</span><span
lang=EN-US>,{A-&gt;Aa,A-&gt;b}&nbsp; </span><span style='font-family:宋体'>当使用最左推导时，</span><span
lang=EN-US>A-&gt;Aa,</span><span style='font-family:宋体'>就会陷入无限的分裂中</span><span
lang=EN-US> A-&gt;AAA...a</span><span style='font-family:宋体'>。经典的处理方法是将这两个产生式转换成</span><span
lang=EN-US>3</span><span style='font-family:宋体'>个等价的产生式</span><span lang=EN-US>{A-&gt;bR,R-&gt;aR,R-&gt;</span><span
style='font-family:宋体'>空</span><span lang=EN-US>}; </span><span
style='font-family:宋体'>具体可以自行验证一下，编译原理的书也有详细叙述。</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:21.0pt'><span lang=EN-US>&nbsp;&nbsp;&nbsp;
</span><span style='font-family:宋体'>右递归也类似这样。不过是形如</span><span lang=EN-US>(A-&gt;aA,A-&gt;b)</span><span
style='font-family:宋体'>的产生式规则</span> <span style='font-family:宋体'>在运用最右推导的时候才会产生，解决方法也雷同。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc361871709"><span lang=EN-US>第3小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体;font-weight:normal'>语法解析的</span></a><span
style='font-family:宋体'>自顶向下和自底向上的策略</span></h3>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span><span style='font-family:
宋体'>语法解析的过程，就算是拿这个纸带似的字符串序列按照一定规则扭成目标的语法结构，如果能扭成，就说明这个是字符串序列是符合这个语法的，否则就是不符合这个语法的。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>那现在我们关注一下这个扭的过程。一般而言，有以下两种策略。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>自顶向下的策略：在构造语法树</span><span
lang=EN-US>(</span><span style='font-family:宋体'>就是那个像一颗倒着的树的语法结构</span><span
lang=EN-US>)</span><span style='font-family:宋体'>的时候，从语法树的根节点开始，按照先根顺序构造各个节点，也就是说，叶结点总是后于根节点创建，</span>
<span style='font-family:宋体'>过程就像从上面</span><span lang=EN-US>(</span><span
style='font-family:宋体'>根节点</span><span lang=EN-US>)</span><span
style='font-family:宋体'>到下面</span><span lang=EN-US>(</span><span
style='font-family:宋体'>叶结点</span><span lang=EN-US>)</span><span
style='font-family:宋体'>建造，因此得名。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>自底向上，刚好相反。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如何理解这两者的区别呢？</span></p>

<p class=MsoNormal><span style='font-family:宋体'>一个人，左手拿着一个语法结构，右手从一个管道里面取出</span>
<span style='font-family:宋体'>输入字符串的积木块。往语法结构里面叠放，最后叠出来了带输入字符串的语法结构，这个就叫自顶向下。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>如果那个人左手拿着一段输入字符串，右手从一堆</span> <span
style='font-family:宋体'>零散的语法结构积木块里面取出合适的积木块，往输入字符串上叠放，最后得到一个带输入字符串的语法结构，这个就叫自底向上。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>我们玩一个</span><span lang=EN-US>A</span><span
style='font-family:宋体'>说</span><span lang=EN-US>B</span><span style='font-family:
宋体'>说得游戏来具体说明这个过程吧。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>我们定义这样的语法结构</span><span
lang=EN-US>:</span></p>

<p class=MsoNormal><span style='font-family:宋体'>句式</span><span lang=EN-US>DEMO:
</span><span style='font-family:宋体'>主语</span> <span style='font-family:宋体'>谓语</span>
<span style='font-family:宋体'>宾语</span></p>

<p class=MsoNormal><span style='font-family:宋体'>主语</span><span lang=EN-US>: </span><span
style='font-family:宋体'>人名，简单的以</span><span lang=EN-US>&quot;A&quot; &quot;B&quot;
...&quot;Z&quot;</span><span style='font-family:宋体'>来命名。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>谓语</span><span lang=EN-US>: &quot;say&quot;
</span><span style='font-family:宋体'>和</span> <span lang=EN-US>&quot;is&quot; </span><span
style='font-family:宋体'>两个动词。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>宾语</span><span lang=EN-US>: that</span><span
style='font-family:宋体'>从句</span> <span style='font-family:宋体'>或者</span> <span
lang=EN-US>&quot;over&quot;</span><span style='font-family:宋体'>这个词。</span></p>

<p class=MsoNormal><span lang=EN-US>that</span><span style='font-family:宋体'>从句：</span><span
lang=EN-US>&quot;that&quot; </span><span style='font-family:宋体'>主语</span> <span
style='font-family:宋体'>谓语</span> <span style='font-family:宋体'>宾语。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>现在我们来分析</span> <span
style='font-family:宋体'>这样的一个句子</span><span lang=EN-US>: </span></p>

<p class=MsoNormal><span lang=EN-US>A say that B say that C is over;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>先来看看自顶向上是怎样的过程：</span></p>

<p class=MsoNormal><span style='font-family:宋体'>我们先略去词法分析，假设</span><span
lang=EN-US>A B C say is that over</span><span style='font-family:宋体'>这些已经被识别为单词</span>
<span style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>左手拿着语法结构</span> <span
style='font-family:宋体'>句式</span><span lang=EN-US>demo&nbsp; </span><span
style='font-family:宋体'>，右手准备从管道里面取出单词。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>句式</span><span lang=EN-US>demo </span><span
style='font-family:宋体'>要求的第一个元素是</span> <span style='font-family:宋体'>主语：人名。</span>
<span style='font-family:宋体'>右手从管道里面取出的第一个单词是</span><span lang=EN-US>A </span><span
style='font-family:宋体'>，刚好是人名，两者符合，于是到下一步，</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=136 height=116
src="hand%20in%20hand%20with%20antlr.files/image037.png"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>句式</span><span lang=EN-US>demo </span><span
style='font-family:宋体'>要求第二个元素是</span> <span style='font-family:宋体'>谓语</span><span
lang=EN-US> say </span><span style='font-family:宋体'>或者</span><span lang=EN-US>
is </span><span style='font-family:宋体'>两个单词。</span> <span style='font-family:
宋体'>右手从管道取出的第二个单词是</span><span lang=EN-US> say</span><span style='font-family:
宋体'>，</span> <span style='font-family:宋体'>也符合要求，于是可以继续下一步。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=136 height=118
src="hand%20in%20hand%20with%20antlr.files/image038.png"></span></p>

<p class=MsoNormal><span style='font-family:宋体'>句式</span><span lang=EN-US>demo </span><span
style='font-family:宋体'>要求的第三个元素是</span><span lang=EN-US> over </span><span
style='font-family:宋体'>或者</span> <span style='font-family:宋体'>以</span><span
lang=EN-US>that</span><span style='font-family:宋体'>开头的</span><span lang=EN-US>that</span><span
style='font-family:宋体'>从句。</span> <span style='font-family:宋体'>右手从管道取出的是</span><span
lang=EN-US>that.. </span><span style='font-family:宋体'>满足是</span><span
lang=EN-US>that</span><span style='font-family:宋体'>的从句的特征，但是此刻不能判断是不是正确的</span><span
lang=EN-US>that</span><span style='font-family:宋体'>从句，假定为</span><span
lang=EN-US>that</span><span style='font-family:宋体'>从句，跳到</span><span
lang=EN-US>that</span><span style='font-family:宋体'>从句的语法规则，继续下一步。</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=194 height=159
src="hand%20in%20hand%20with%20antlr.files/image039.png"></span></p>

<p class=MsoNormal><span lang=EN-US>that</span><span style='font-family:宋体'>从句要求</span><span
lang=EN-US>that</span><span style='font-family:宋体'>之后的元素是</span> <span
style='font-family:宋体'>主语</span><span lang=EN-US>:</span><span
style='font-family:宋体'>人名。右手从管道里面取出的是</span><span lang=EN-US>B </span><span
style='font-family:宋体'>，符合要求，继续下一步</span><span lang=EN-US>...</span></p>

<p class=MsoNormal><span style='font-family:宋体'>重复以上步骤，刚刚好左手所有用到的规则都得到满足，而右手管道的内容也都空了。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>于是我们就得到了这样的一棵语法结构树</span><span
lang=EN-US>:</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=434 height=293
src="hand%20in%20hand%20with%20antlr.files/image040.png"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span style='font-family:宋体'>我们再来看看自底向上的过程</span><span
lang=EN-US>:</span></p>

<p class=MsoNormal><span style='font-family:宋体'>把上面过程的左右手换过来</span><span
lang=EN-US>.</span><span style='font-family:宋体'>左手字符串的管道，右手语法规则堆。我们借助一种叫堆栈的结构工具，你可以把堆栈想象成像</span>
<span style='font-family:宋体'>子弹夹这样的东西，后压进去的子弹先出来，如果有子弹的话，永远有一颗子弹保持在顶端，我们把那个顶端位置叫做栈顶。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>自底向上的处理过程总体是这样的，把左手的字符串中的元素按照顺序，像子弹一样，一个一个的压入进去，压入一个就从栈顶开始依次往栈底检查，如果符合右边语法规则堆里面的规则，就把符合部分的堆栈内容弹出，把那个抽象规则名，压入进去，</span>
<span style='font-family:宋体'>把字符串压入栈的过程叫<b>移动</b>，发现符合语法规则，变成抽象的语法名称实例</span><span
lang=EN-US>(</span><span style='font-family:宋体'>或者</span><span lang=EN-US>handle)
,</span><span style='font-family:宋体'>然后再压入栈的过程叫<b>规约</b>。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>具体例子过程如下</span><span
lang=EN-US>:</span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=553 height=890
src="hand%20in%20hand%20with%20antlr.files/image041.png"></span></p>

<p class=MsoNormal><span lang=EN-US><img border=0 width=554 height=460
src="hand%20in%20hand%20with%20antlr.files/image042.png"></span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc361871710"><span lang=EN-US>第三节<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>经典的表达式教程解析</span></a></h2>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span><span style='font-family:
宋体'>几乎每一本语法解析的教程都会用整数四则表达式来当作入门级别的语法教程，这节就以实用的视角去剖析这个教程，我们就当它是一个真实的</span><span
lang=EN-US>case</span><span style='font-family:宋体'>吧。</span></p>

<h3><a name="_Toc361871711"><span lang=EN-US>第1小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>界定需求</span></a> </h3>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>假设你给某一个程序一串常用的三则混合运算的表达式，要求这个程序给你计算出结果，显示的要求如下</span><span
lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:26.5pt;text-indent:-21.0pt'><span
lang=EN-US>1)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>使用者传递文本传递文本给程序，程序解析完后在控制台输出结果，或者错误信息</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:26.5pt;text-indent:-21.0pt'><span
lang=EN-US>2)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>输入和结果为整型范围的整数。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:26.5pt;text-indent:-21.0pt'><span
lang=EN-US>3)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>支持命名的表达式。表达式结果可以被其他表达式按名引用。支持多条表达式批量计算。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:26.5pt;text-indent:-21.0pt'><span
lang=EN-US>4)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>支持加减乘三种运算符号</span><span lang=EN-US>,</span><span
style='font-family:宋体'>符号操作意义同数学，注</span><span lang=EN-US>:</span><span
style='font-family:宋体'>乘优先级比加减高。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:26.5pt;text-indent:-21.0pt'><span
lang=EN-US>5)<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>支持括号，括号改变原有的运算符号优先级。</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:26.5pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>这个</span><span lang=EN-US>case</span><span
style='font-family:宋体'>比较特殊，它的需求是简单直白的，故没经过什么抽象过程。然而，在真实的环境中，以用户用例界定功能边界，从用例中抽取出需求。这是一个很重要也很复杂的工作，这也超出了本书的范围与作者的能力，有兴趣的可以看看关于</span><span
lang=EN-US>&lt;</span><span style='font-family:宋体'>需求的探索</span><span
lang=EN-US>&gt; &lt;rup&gt;&lt;</span><span style='font-family:宋体'>分析与设计</span><span
lang=EN-US>&gt;</span><span style='font-family:宋体'>等软件需求分析与设计的书。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>一般用</span><span lang=EN-US>use case</span><span
style='font-family:宋体'>来捕捉描述需求，这里我拟总结出自己的一些经验法则，<span style='color:red'>但有必要提醒一下，这只是个人经验法则，没有经过严格的证明是对的</span></span><span
lang=EN-US style='color:red'>.</span><span style='font-family:宋体;color:red'>请批判性的接受</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>要找出参与者，语言是多方沟通的契约。所以要找出场景中的参与者。并对参与者进行归类。即要抽象出参与者的角色。（见需求</span><span
lang=EN-US>1</span><span style='font-family:宋体'>）</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>找出潜在的条件约束，以及沟通的目的，这个对语义实现很重要。比如在实时交易的场景下，对时间的要求很严格，这种就是潜在的约束条件。</span>
<span style='font-family:宋体'>沟通的目的又是什么呢？</span> <span style='font-family:宋体'>像表达式的例子的目的就是计算这个表达式最后的结果。</span><span
lang=EN-US>(</span><span style='font-family:宋体'>见需求</span><span lang=EN-US>2)</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>抽取出专业术语，这个对词法分析和语义实现很重要。这其实是一种取巧的做法，利用人的思维锤炼出来的结果。当一件事情被锤炼千百遍的时候，人脑一般都会进行抽象，用最精简的信息来描述这个事件，这就是常说的行话。精简的信息包含的大量的内涵，内涵决定了语义的实现。比如行话“调试</span><span
lang=EN-US>(debug) </span><span style='font-family:宋体'>”就是包含了设置断点一步一步追踪检查程序代码每一处状态的一系列过程。</span><span
lang=EN-US>(</span><span style='font-family:宋体'>见需求</span><span lang=EN-US>3</span><span
style='font-family:宋体'>、</span><span lang=EN-US>4)</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>明确专业术语要求的上下文。比如隐含某些参数或者需要指定具体的参数，那些术语需要和那些术语配套使用。</span><span
lang=EN-US>(</span><span style='font-family:宋体'>见需求</span><span lang=EN-US>3</span><span
style='font-family:宋体'>、</span><span lang=EN-US>4</span><span style='font-family:
宋体'>、</span><span lang=EN-US>5)</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt;text-indent:-21.0pt'><span
lang=EN-US style='font-family:Wingdings'>&Oslash;<span style='font:7.0pt "Times New Roman"'>&nbsp;
</span></span><span style='font-family:宋体'>判断描述的粒度。有一些场景，用一个句子就可以描述清楚了，有些场景需要用一段话来描述，而有一些场景，需要用一篇文章来描述。</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:21.0pt'><span lang=EN-US>&nbsp;</span></p>

<h3><a name="_Toc361871712"><span lang=EN-US>第2小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>设计语法</span></a></h3>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span
style='font-family:宋体'>设计语法是一个很麻烦的过程，但也是一个最重要的过程。</span></p>

<p class=MsoListParagraph style='margin-left:21.0pt;text-indent:-21.0pt'><b><span
lang=EN-US>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span style='font-family:宋体'>首先要列出所有的单词项，并设计出词法规则。表达式例子中单词项如下</span></b><b><span
lang=EN-US>: </span></b></p>

<p class=MsoNormal><span style='font-family:宋体'>标识符</span><span lang=EN-US>: </span><span
style='font-family:宋体'>表达式名，由</span><span lang=EN-US>A</span><span
style='font-family:宋体'>到</span><span lang=EN-US>Z</span><span style='font-family:
宋体'>组成，位数不限。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>整数项</span><span lang=EN-US>: </span><span
style='font-family:宋体'>由</span><span lang=EN-US>0</span><span style='font-family:
宋体'>到</span><span lang=EN-US>9</span><span style='font-family:宋体'>组成，位数不限，</span><span
lang=EN-US>(</span><span style='font-family:宋体'>实际上不考虑而已，本例不支持大数</span><span
lang=EN-US>).</span></p>

<p class=MsoNormal><span style='font-family:宋体'>加号</span><span lang=EN-US>:+</span></p>

<p class=MsoNormal><span style='font-family:宋体'>减号</span><span lang=EN-US>:-</span></p>

<p class=MsoNormal><span style='font-family:宋体'>乘号</span><span lang=EN-US>:*</span></p>

<p class=MsoNormal><span style='font-family:宋体'>除号</span><span lang=EN-US>:/</span></p>

<p class=MsoNormal><span style='font-family:宋体'>左括号</span><span lang=EN-US>:(</span></p>

<p class=MsoNormal><span style='font-family:宋体'>右括号</span><span lang=EN-US>:)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>词法规则，实际就是正则表达式来描述，不熟悉的人到网络上搜以下正则表达式的经典教材看看吧。这里不累述了。</span></p>

<p class=MsoListParagraphCxSpFirst style='margin-left:21.0pt;text-indent:-21.0pt'><b><span
lang=EN-US>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span style='font-family:宋体'>分析使用场景，根据需求，逐步分析出语法推导的产生式规则集合。</span></b></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>从一堆杂乱的需求中去构造出精巧准确的语法结构，是一个由简入繁的不断反复迭代的过程，如抽茧剥丝后裁衣一样，大凡此类工作都有一定的艺术鉴赏性，但只有你沉浸其中时才能体味。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>我们观察需求，对语法元素进行分类，按照其作用将涉及元素分成三类</span><span
lang=EN-US>{</span><span style='font-family:宋体'>整数项，标识符</span><span lang=EN-US>}</span><span
style='font-family:宋体'>作为操作项，</span><span lang=EN-US>{</span><span
style='font-family:宋体'>加减乘</span><span lang=EN-US>}</span><span
style='font-family:宋体'>作为运算符，</span><span lang=EN-US>{</span><span
style='font-family:宋体'>括号</span><span lang=EN-US>}</span><span
style='font-family:宋体'>作为辅助符号。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>我们从每一个分类中取一个元素出来分析，构造出产生式描述的语法规则组。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>然后再逐步的加入同类的元素。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>先取</span> <span style='font-family:宋体'>整数项，加法，和括号</span>
<span style='font-family:宋体'>三个元素。它们只有两种形式，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp; </span><span style='font-family:宋体'>整数项</span><span
lang=EN-US>+</span><span style='font-family:宋体'>整数项</span><span lang=EN-US>+</span><span
style='font-family:宋体'>整数项</span><span lang=EN-US>+....</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp; </span><span style='font-family:宋体'>整数项</span><span
lang=EN-US>+(</span><span style='font-family:宋体'>整数项</span><span lang=EN-US>+</span><span
style='font-family:宋体'>整数项</span><span lang=EN-US>)+</span><span
style='font-family:宋体'>整数项</span><span lang=EN-US>+....</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体;color:red'>假设</span><span lang=EN-US style='color:red'>a</span><span
style='font-family:宋体;color:red'>代表一个整数项</span><span style='font-family:宋体'>，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>用这个两条产生式</span><span lang=EN-US>{S-&gt;S+a,S-&gt;a} </span><span
style='font-family:宋体'>就可以描述第一条语法规则，有人可能会问这两条产生式是如何的，其实我也不知道，貌似自然而然的就抽象出来了，再仔细想了一想，我觉得用数学归纳法比较适合解释这个过程。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>a,a+a,a+a+a,a+a+a+a,a+a+a+a+a....</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>=&gt; a,{a}+a,{a+a}+a,{a+a+a}+a,{a+a+a+a}+a....(</span><span
style='font-family:宋体'>我们借助花括号来帮助界定成分</span><span lang=EN-US>)</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>括号里面的就是前面的式子。然后就推出了通项：</span><span lang=EN-US>A[0]=a&nbsp;
A[n] = A[n-1]+a</span><span style='font-family:宋体'>；</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体;color:red'>请注意：这里的</span><span lang=EN-US
style='color:red'>+</span><span style='font-family:宋体;color:red'>是一个字符串符号</span><span
lang=EN-US style='color:red'>, a+a</span><span style='font-family:宋体;
color:red'>代表</span><span lang=EN-US style='color:red'>a</span><span
style='font-family:宋体;color:red'>连接</span><span lang=EN-US style='color:red'>+</span><span
style='font-family:宋体;color:red'>号连接</span><span lang=EN-US style='color:red'>a</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{S-&gt;S+a,S-&gt;a} </span><span style='font-family:宋体'>虽然直观却不适合最左推导，按照公式转一下</span><span
lang=EN-US>(</span><span style='font-family:宋体;color:red'>见上面的最左推导</span><span
lang=EN-US>)</span><span style='font-family:宋体'>。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{S-&gt;aR,R-&gt;+aR,R-&gt;</span><span style='font-family:宋体'>空</span><span
lang=EN-US>}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>再看第二种形式；</span> <span style='font-family:宋体'>通过观测可以看出来，括号里面的是一个子表达式。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>于是</span><span lang=EN-US>{S-&gt;S+a,S-&gt;a,S-&gt;(S) }
&nbsp;&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>转成符合最左推导的形式</span><span lang=EN-US>: {
S-&gt;aR,R-&gt;+aR,R-&gt;</span><span style='font-family:宋体'>空</span><span
lang=EN-US>,S-&gt;(S)}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>重新选取</span> <span style='font-family:宋体'>整数项，减号，括号，进行同样的分析和构造，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>可以得到</span><span lang=EN-US>
{S-&gt;S-a,S-&gt;a,S-&gt;(S) }</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>由于加减法对等，合并后可以得到</span><span lang=EN-US>{S-&gt;S-a,S-&gt;S+a,S-&gt;a,S-&gt;(S)
}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>这就是描述加减混合运算的式子，很容易通过实例来验证的。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>同理的，我们可以把乘法也加入进来</span><span lang=EN-US>,</span><span
style='font-family:宋体'>可以得到这样的一个</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{S-&gt;S-a,S-&gt;S+a,S-&gt;S*a,S-&gt;a,S-&gt;(S) } </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>转成符合最左推导的形式</span><span lang=EN-US>: {
S-&gt;aR,R-&gt;+aR, R-&gt;-aR, R-&gt;*aR ,R-&gt;</span><span style='font-family:
宋体'>空</span><span lang=EN-US>,S-&gt;(S)}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>如果，我只是说，如果</span><span lang=EN-US>...</span><span
style='font-family:宋体'>这个世界上只语法实现语法而不实现语义的话</span><span lang=EN-US>... </span><span
style='font-family:宋体'>那就太完美了。但通常上帝都会给你留点遗憾的。这些规则完全可以合法的解析含加减乘的表达式，但是它们无法区分出需求中比较重要的一条</span><span
lang=EN-US>:</span><span style='font-family:宋体'>乘法优先级比加减的优先级要高。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>乔</span><span lang=EN-US>boss</span><span
style='font-family:宋体'>说过一句经典名言：形式应该追随功能。很显然的，我们之前抽象归纳出来的语法规则的形式并不是追随功能的，那就变换一下吧。我们知道乘法的优先级比加减法高，故涉及乘法的表达式部分应该先结合成项，然后再作为加减算术符号的两边的操作项再形成加减表达式，故我们在乘法的基础</span><span
lang=EN-US>{M-&gt;M*a, M-&gt;a,M-&gt;(M)}</span><span style='font-family:宋体'>上，垒上一层加减法看看，如下</span><span
lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{M-&gt;M*a, M-&gt;a,M-&gt;(M), S-&gt;M+M,S-&gt;M-M}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>嗯，挺接近了，但这组语法规则无法解决两个问题</span><span lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>1</span><span style='font-family:宋体'>、无法处理多个连续的加减号。</span> <span
style='font-family:宋体'>形如</span><span lang=EN-US>a+a-a-a+a</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>2</span><span style='font-family:宋体'>、从开始符号无法推导纯的连续乘表达式。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>3</span><span style='font-family:宋体'>、无法处理子表达式中超过一个加减号的。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>针对问题</span><span lang=EN-US>1</span><span
style='font-family:宋体'>，分析一下特点，第一项必须为</span><span lang=EN-US>a </span><span
style='font-family:宋体'>，第二项为第一项连接</span><span lang=EN-US>+a </span><span
style='font-family:宋体'>或者第一项连接</span><span lang=EN-US>-a,</span><span
style='font-family:宋体'>因此推出通向项为前一项连接上</span><span lang=EN-US>+a</span><span
style='font-family:宋体'>或者连接上</span><span lang=EN-US>-a</span><span
style='font-family:宋体'>，于是我们就大致可以推断出规则</span><span lang=EN-US>:</span><span
style='font-family:宋体'>引入一个</span><span lang=EN-US>Expr </span><span
style='font-family:宋体'>简写为</span><span lang=EN-US>E {E-&gt;M,E-&gt;E+M,E-&gt;E-M}</span><span
style='font-family:宋体'>来代替加减项，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>于是得到规则组</span><span lang=EN-US>: {M-&gt;M*a, M-&gt;a,M-&gt;(M),
E-&gt;M,E-&gt;E+M, E-&gt;E-M,S-&gt;E }</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>同时因为加入一个</span><span lang=EN-US>E-&gt;M</span><span
style='font-family:宋体'>，也解决了问题</span><span lang=EN-US>2</span><span
style='font-family:宋体'>，即从开始符号推导出连续乘。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>针对问题</span><span lang=EN-US>3</span><span
style='font-family:宋体'>，把</span><span lang=EN-US>M-&gt;(M) </span><span
style='font-family:宋体'>改成</span><span lang=EN-US> M-&gt;(E)</span><span
style='font-family:宋体'>。也即乘法中要有比乘法范围更广的包含了加减法的子表达式做为因子项，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>于是得到语法规则组</span><span lang=EN-US>{M-&gt;M*a,
M-&gt;a,M-&gt;(E), E-&gt;M, E-&gt;E+M, E-&gt;E-M,S-&gt;E }</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>转化成符合最左推导的语法规则组是</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{ M-&gt; aR,R-&gt;*aR,R-&gt;</span><span style='font-family:宋体'>空</span><span
lang=EN-US>,M-&gt;(E), E-&gt;MN, N-&gt;+MN, N-&gt;-MN,N-&gt;</span><span
style='font-family:宋体'>空</span><span lang=EN-US>,S-&gt;E }</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>至此，整数项，加减乘符，括号已经被加入进来了。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>现在加入标识符号。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>引入标识符</span><span lang=EN-US>id </span><span
style='font-family:宋体'>简写为</span><span lang=EN-US>i</span><span
style='font-family:宋体'>，</span> </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>加入标识符后，</span><span lang=EN-US> a </span><span
style='font-family:宋体'>和</span><span lang=EN-US> i </span><span
style='font-family:宋体'>就成了同等意义的符号，可以抽象出一层，我们使用大写</span><span lang=EN-US>A</span><span
style='font-family:宋体'>来代表。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{A-&gt;a,A-&gt;i}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>同时，匿名表达式仍然保持之前同样的语法结构，新增了一个命名表达式，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>所以，用一个新的元素</span><span lang=EN-US>P{P-&gt;E,P-&gt;i=E}</span><span
style='font-family:宋体'>来代替，</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>于是规则变成</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{ A-&gt;a,A-&gt;i,M-&gt;M*a, M-&gt;a,M-&gt;(E), E-&gt;M, E-&gt;E+M, E-&gt;E-M,
P-&gt;E,P-&gt;i=E, S-&gt;P }</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>转化成符合最左推导的语法规则组是</span><span lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{ A-&gt;a,A-&gt;i,M-&gt;AR,R-&gt;*AR,R-&gt;</span><span
style='font-family:宋体'>空</span><span lang=EN-US>, M-&gt;(E), E-&gt;MN, N-&gt;+MN,
N-&gt;-MN,N-&gt;</span><span style='font-family:宋体'>空</span><span lang=EN-US>, P-&gt;E,P-&gt;i=E,S-&gt;P}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>至此所有的重要符号都已经加入完成。</span> </p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>但对照需求</span><span lang=EN-US>3</span><span
style='font-family:宋体'>，还有批量表达式的支持，只需要对</span><span lang=EN-US>P</span><span
style='font-family:宋体'>的重复即可也即</span><span lang=EN-US>{S-&gt;P,S-&gt;SP} </span><span
style='font-family:宋体'>。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>最后合并在一起便是</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{ A-&gt;a,A-&gt;i,M-&gt;M*a, M-&gt;a,M-&gt;(E), E-&gt;M, E-&gt;E+M, E-&gt;E-M,
P-&gt;E,P-&gt;i=E, S-&gt;P,S-&gt;SP }</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>转化成符合最优推导的语法规则组</span><span lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{ A-&gt;a,A-&gt;i,M-&gt;AR,R-&gt;*AR,R-&gt;</span><span
style='font-family:宋体'>空</span><span lang=EN-US>, M-&gt;(E), E-&gt;MN, N-&gt;+MN,
N-&gt;-MN,N-&gt;</span><span style='font-family:宋体'>空</span><span lang=EN-US>, P-&gt;E,P-&gt;i=E,S-&gt;PQ,Q-&gt;PQ,Q-&gt;</span><span
style='font-family:宋体'>空</span><span lang=EN-US>}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>至此，我们就从需求开始进行一步步地推导得到了最后的语法规则组。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>如图表</span><span lang=EN-US>:</span><span
style='font-family:宋体'>我简单的总结了一些推导技巧以及映射的技巧</span></p>

<table class=MsoTableGrid border=1 cellspacing=0 cellpadding=0
 style='margin-left:21.0pt;border-collapse:collapse;border:none'>
 <tr>
  <td width=136 valign=top style='width:102.1pt;border:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>需求</span></p>
  </td>
  <td width=132 valign=top style='width:98.7pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>正则</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>最右推导规则组</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border:solid black 1.0pt;
  border-left:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpLast style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>最左推导规则组</span></p>
  </td>
 </tr>
 <tr>
  <td width=136 valign=top style='width:102.1pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpFirst style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>连接项或者与关系项</span></p>
  </td>
  <td width=132 valign=top style='width:98.7pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>ab</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;ab</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpLast style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;ab</span></p>
  </td>
 </tr>
 <tr>
  <td width=136 valign=top style='width:102.1pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpFirst style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>或关系项</span></p>
  </td>
  <td width=132 valign=top style='width:98.7pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>a|b</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;a,S-&gt;b</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpLast style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;a,S-&gt;b</span></p>
  </td>
 </tr>
 <tr>
  <td width=136 valign=top style='width:102.1pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpFirst style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>可选项</span></p>
  </td>
  <td width=132 valign=top style='width:98.7pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>a?</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;a,S-&gt;</span><span
  style='font-family:宋体'>空</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpLast style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;a,S-&gt;</span><span
  style='font-family:宋体'>空</span></p>
  </td>
 </tr>
 <tr>
  <td width=136 valign=top style='width:102.1pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpFirst style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>至少重复一次</span><span
  lang=EN-US>(</span><span style='font-family:宋体'>正闭包</span><span lang=EN-US>)</span></p>
  </td>
  <td width=132 valign=top style='width:98.7pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>a+</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;Sa,S-&gt;a</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpLast style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;aR,R-&gt;aR,R-&gt;</span><span
  style='font-family:宋体'>空</span></p>
  </td>
 </tr>
 <tr>
  <td width=136 valign=top style='width:102.1pt;border:solid black 1.0pt;
  border-top:none;padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpFirst style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>重复</span><span lang=EN-US>0</span><span
  style='font-family:宋体'>次或者多次</span><span lang=EN-US>(</span><span
  style='font-family:宋体'>克林闭包</span><span lang=EN-US>)</span></p>
  </td>
  <td width=132 valign=top style='width:98.7pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>a* </span></p>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span style='font-family:宋体'>注</span><span lang=EN-US>:
  a*=a+|</span><span style='font-family:宋体'>空</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;Sa,S-&gt;a,S-&gt;</span><span
  style='font-family:宋体'>空</span></p>
  </td>
  <td width=136 valign=top style='width:102.15pt;border-top:none;border-left:
  none;border-bottom:solid black 1.0pt;border-right:solid black 1.0pt;
  padding:0cm 5.4pt 0cm 5.4pt'>
  <p class=MsoListParagraphCxSpMiddle style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;aR,R-&gt;aR,R-&gt;</span><span
  style='font-family:宋体'>空</span></p>
  <p class=MsoListParagraphCxSpLast style='margin:0cm;margin-bottom:.0001pt;
  line-height:normal'><span lang=EN-US>S-&gt;</span><span style='font-family:
  宋体'>空</span></p>
  </td>
 </tr>
</table>

<p class=MsoListParagraphCxSpFirst style='margin-left:21.0pt'><span lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt;text-indent:-21.0pt'><b><span
lang=EN-US>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></b><b><span style='font-family:宋体'>把语法规则产生式集合转化成</span></b><b><span
lang=EN-US>antlr</span></b><b><span style='font-family:宋体'>的语法描述</span></b></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; </span><span style='font-family:宋体'>接下来的工作是把之前所得到的语法规则组，转换成</span><span
lang=EN-US>antlr</span><span style='font-family:宋体'>的语法表示。关于</span><span
lang=EN-US>antlr v3</span><span style='font-family:宋体'>语法规则的规范请参照</span><span
lang=EN-US>(http://www.antlr.org/wiki/display/ANTLR3/ANTLR+v3+printable+documentation),</span><span
style='font-family:宋体;color:red'>很抱歉，任何初学者都需要精心去读一遍该文档，没有任何的窍门可以走的</span><span
style='font-family:宋体'>。我也着手翻译和批注了一点，但由于去年一些突发事情耽搁了很久，</span><span lang=EN-US>v3</span><span
style='font-family:宋体'>还没翻译完，</span><span lang=EN-US>v4</span><span
style='font-family:宋体'>就出来了，我也在考虑是否继续翻译</span><span lang=EN-US>v3</span><span
style='font-family:宋体'>还是新翻译</span><span lang=EN-US>v4.</span><span
style='font-family:宋体'>无论</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>根据上一个步骤的总结表，对</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{ A-&gt;a,A-&gt;i,M-&gt;AR,R-&gt;*AR,R-&gt;</span><span
style='font-family:宋体'>空</span><span lang=EN-US>, M-&gt;(E), E-&gt;MN, N-&gt;+MN,
N-&gt;-MN,N-&gt;</span><span style='font-family:宋体'>空</span><span lang=EN-US>, P-&gt;E,P-&gt;i=E,S-&gt;PQ,Q-&gt;PQ,Q-&gt;</span><span
style='font-family:宋体'>空</span><span lang=EN-US>}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>进行翻译，一下翻译采用表达式例子中的命名。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>先翻译词法吧</span><span lang=EN-US>,</span><span
style='font-family:宋体'>毕竟这是基础。<span style='color:red'>有一点需要记住的是，词法首字母必须大写，一般情况下，都用全部大写来标识词法单元。</span></span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>ID&nbsp; :&nbsp;&nbsp; ('a'..'z'|'A'..'Z')+ ;//</span><span
style='font-family:宋体'>标识符是任意的大小写混合</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>INT :&nbsp;&nbsp; '0'..'9'+ ;&nbsp; //</span><span style='font-family:
宋体'>整数项是任意的数字</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>NEWLINE:'\r'? '\n' ;&nbsp; //</span><span style='font-family:宋体'>换行符号，</span><span
lang=EN-US> \r</span><span style='font-family:宋体'>可选是为了应对</span><span
lang=EN-US>window</span><span style='font-family:宋体'>和</span><span lang=EN-US>unix</span><span
style='font-family:宋体'>的区别。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>WS&nbsp; :&nbsp;&nbsp; (' '|'\t')+ {skip();} ; //</span><span
style='font-family:宋体'>空白符号，默认动作忽略。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>还有几个符号</span> <span style='font-family:宋体'>加减乘和括号，这几个默认以字符串的形式出现在语法解析中，其实也可以定义在这里的。我们就遵照</span><span
lang=EN-US>demo</span><span style='font-family:宋体'>行事吧。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>现在开始翻译语法，语法中有一点需要注意的是语法是以小写开始的。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>与整数项，标识符相关的</span><span lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>{A-&gt;a,A-&gt;i} </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>atom</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp; INT </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; ID&nbsp;&nbsp; </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; ;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>乘法相关的：</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>M-&gt;AR,R-&gt;*AR,R-&gt;</span><span style='font-family:宋体'>空</span><span
lang=EN-US>, M-&gt;(E) </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>multExpr </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp; atom&nbsp; ('*' atom )*&nbsp; //</span><span
style='font-family:宋体;color:red'>注</span><span lang=EN-US style='color:red'>:</span><span
style='font-family:宋体;color:red'>处第一个</span><span lang=EN-US style='color:red'>'*'</span><span
style='font-family:宋体;color:red'>是</span><span lang=EN-US style='color:red'>token</span><span
style='font-family:宋体;color:red'>第二个</span><span lang=EN-US style='color:red'>*</span><span
style='font-family:宋体;color:red'>是克林闭包</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>|<span style='color:red'>'(' expr ')'</span></span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; ;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>此处，和</span><span lang=EN-US>demo</span><span
style='font-family:宋体'>不太一样。关于子表达式</span><span lang=EN-US>(E)</span><span
style='font-family:宋体'>的安置。</span><span lang=EN-US>demo</span><span
style='font-family:宋体'>中把整数项以及标识符当成看作是参与运算的原子项</span><span lang=EN-US>atom</span><span
style='font-family:宋体'>，并把子表达式也看作是原子项，我们的推导过程中，也把参与乘法的因子中的一个扩展为字表达式，<span
style='color:red'>这两者在变换形式上是等价的，只是含义解释不一样</span>。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>加减法相关的</span><span lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>E-&gt;MN, N-&gt;+MN, N-&gt;-MN,N-&gt;</span><span style='font-family:
宋体'>空</span><span lang=EN-US>, &nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>这个翻译过程有点绕，不是直观，你可以把</span><span lang=EN-US> N-&gt;+MN, N-&gt;-MN
</span><span style='font-family:宋体'>合并成</span><span lang=EN-US>
N-&gt;((+M)|(-M))N &nbsp;</span><span style='font-family:宋体'>，令</span><span
lang=EN-US> T-&gt;((+M)|(-M)) ,</span><span style='font-family:宋体'>即有</span><span
lang=EN-US>&nbsp; {E-&gt;MN,N-&gt;TN,N-&gt;</span><span style='font-family:
宋体'>空</span><span lang=EN-US>} </span><span style='font-family:宋体'>即可利用总结表中格式转化成</span><span
lang=EN-US>demo</span><span style='font-family:宋体'>了。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>expr </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp; multExpr </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (&nbsp;&nbsp; '+'
multExpr </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; '-' multExpr
</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; )*</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; ;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>实际上也有另外一种语法形式，</span><span lang=EN-US>&nbsp; </span><span
style='font-family:宋体'>把</span><span lang=EN-US> N-&gt;+MN, N-&gt;-MN </span><span
style='font-family:宋体'>合并成</span><span lang=EN-US> N-&gt;(+|-)MN&nbsp; </span><span
style='font-family:宋体'>，令</span><span lang=EN-US> T-&gt;(+|-)M ,</span><span
style='font-family:宋体'>即有</span><span lang=EN-US>&nbsp;
{E-&gt;MN,N-&gt;TN,N-&gt;</span><span style='font-family:宋体'>空</span><span
lang=EN-US>}</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>expr </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; :&nbsp;&nbsp; multExpr </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; (( '+' | '-' ) multExpr )*</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; ;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>这两种形式都可以的，</span><span lang=EN-US>demo</span><span
style='font-family:宋体'>的作者偏向于前者，也许那样比较好理解些吧。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>关于命名和匿名表达式的</span><span lang=EN-US>:</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>P-&gt;E,P-&gt;i=E</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>这个没啥悬念的，直接翻译好了，</span><span lang=EN-US>demo</span><span
style='font-family:宋体'>多了一些</span><span lang=EN-US>newline </span><span
style='font-family:宋体'>，无伤大雅。</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>stat:&nbsp;&nbsp; expr NEWLINE </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; ID '=' expr
NEWLINE&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; |&nbsp;&nbsp; NEWLINE</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;&nbsp;&nbsp; ;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
style='font-family:宋体'>关于批量表达式的：</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>S-&gt;PQ,Q-&gt;PQ,Q-&gt;</span><span style='font-family:宋体'>空</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>prog:&nbsp;&nbsp; stat+ ;</span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:21.0pt'><span
lang=EN-US>&nbsp;</span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:21.0pt'><span
style='font-family:宋体'>至此最重要的语法设计完成了，对照需求，一步一步地进行推导出产生式规则，最后翻译成</span><span
lang=EN-US>antlr</span><span style='font-family:宋体'>所支持的</span><span
lang=EN-US>ebnf</span><span style='font-family:宋体'>范式。</span></p>

<h3><a name="_Toc361871713"><span lang=EN-US>第3小节<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>实现语义</span></a></h3>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span><span style='font-family:
宋体'>在很多的场景里面，具体语法一般要转成抽象语法树，然后再在抽象语法树上实现语义动作，这样做的好处可以避免冗余的处理，不同的语法元素但具有相同的语义含义的，可以转化成统一格式合并处理。</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;&nbsp; </span><span style='font-family:
宋体'>但一般简单的语法可以直接嵌入语义动作处理就</span><span lang=EN-US>ok</span><span
style='font-family:宋体'>了，比如这个</span><span lang=EN-US>demo</span><span
style='font-family:宋体'>。</span></p>

<p class=MsoNormal><span style='font-family:宋体'>语义动作一般是以包含在</span><span
lang=EN-US>{}</span><span style='font-family:宋体'>的目标语言的代码。具体的规范参照</span><span
lang=EN-US>: (http://www.antlr.org/wiki/display/ANTLR3/Grammars)</span></p>

<p class=MsoNormal><span style='font-family:宋体'>本节就针对重点地地方进行代码注释。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>prog:&nbsp;&nbsp;
stat+ ;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>stat:&nbsp;&nbsp;
expr NEWLINE {System.out.println($expr.value);} //</span><span
style='font-family:宋体;color:black'>打印匿名表达式值，<span lang=EN-US>$expr</span>是引用这个<span
lang=EN-US>expr</span>这个语法元素，</span><span style='font-family:宋体;color:red'>需要注意的是<span
lang=EN-US> value</span>并不是<span lang=EN-US>expr</span>的内建的属性，而是自定义的<span
lang=EN-US>return</span>的值</span><span style='font-family:宋体;color:black'>，参见<span
lang=EN-US>expr</span>的语法表达式。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; ID '=' expr NEWLINE</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{memory.put($ID.text, new Integer($expr.value));} //</span><span
style='font-family:宋体;color:black'>命名表达式的值存入一个<span lang=EN-US>hashmap</span>对象。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; NEWLINE</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>expr returns [int
value] //</span><span style='font-family:宋体;color:black'>在此定义了这个<span
lang=EN-US>expr</span>对调用者提供一个<span lang=EN-US>value</span>的返回值。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
:&nbsp;&nbsp; e=multExpr {$value = $e.value;} //</span><span style='font-family:
宋体;color:black'>以<span lang=EN-US>e</span>的方式引用第一个<span lang=EN-US>multExpr,</span>语义动作在此把左边的表达式的值赋给返回值变量。注意<span
lang=EN-US>:$e.value</span>也不是内建的，是<span lang=EN-US>multExpr</span>定义的返回值。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
(&nbsp;&nbsp; '+' e=multExpr {$value += $e.value;}//</span><span
style='font-family:宋体;color:black'>以<span lang=EN-US>e</span>的方式第二个<span
lang=EN-US>multExpr</span>，由于作用域不同，故无冲突，这个语义动作只有遇到<span lang=EN-US>+</span>才会执行。语义动作式返回值累加<span
lang=EN-US>e</span>这个项。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; '-' e=multExpr {$value -= $e.value;}//</span><span
style='font-family:宋体;color:black'>同理，不过是累减。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
)*&nbsp; //</span><span style='font-family:宋体;color:black'>需要特别注意的是，这个克林闭包，会让上面的两个语义动作，不断的重复。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>multExpr returns
[int value]&nbsp; //</span><span style='font-family:宋体;color:black'>这个表达式和<span
lang=EN-US>expr </span>无啥本质差别</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
:&nbsp;&nbsp; e=atom {$value = $e.value;} ('*' e=atom {$value *= $e.value;})*</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
; </span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>atom returns [int
value]</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
:&nbsp;&nbsp; INT {$value = Integer.parseInt($INT.text);}//</span><span
style='font-family:宋体;color:black'>将词法的字符串值转换成整型，然后赋值给返回值，<span lang=EN-US>text</span>是内建变量。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; ID</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
{</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Integer v = (Integer)memory.get($ID.text);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
if ( v!=null ) $value = v.intValue();</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
else System.err.println(&quot;undefined variable &quot;+$ID.text);</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
}//</span><span style='font-family:宋体;color:black'>如果是标识符，则从<span lang=EN-US>hashmap</span>中按名取出来。</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
|&nbsp;&nbsp; '(' e=expr ')' {$value = $e.value;}</span></p>

<p class=MsoNormal style='margin-bottom:0cm;margin-bottom:.0001pt;line-height:
normal'><span lang=EN-US style='font-family:宋体;color:black'>&nbsp;&nbsp;&nbsp;
;</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h2><a name="_Toc361871714"><span lang=EN-US>第四节<span style='font:7.0pt "Times New Roman"'>
</span></span><span style='font-family:宋体'>状态机代码生成框架实例分析</span></a></h2>

<p class=MsoNormal><span style='font-family:宋体'>待写</span><span lang=EN-US>.....</span></p>

<p class=MsoNormal><span style='font-family:宋体'>有兴趣的可以访问：</span></p>

<p class=MsoNormal><span lang=EN-US>http://www.github.com/alan2lin/makefsm</span></p>

<p class=MsoNormal><span style='font-family:宋体'>若有兴趣参与开发或者讨论的请加</span><span
lang=EN-US>qq</span><span style='font-family:宋体'>群</span><span lang=EN-US>:
281827854</span></p>

<p class=MsoNormal><span lang=EN-US>&nbsp;</span></p>

<h1><a name="_Toc361871715"><span lang=EN-US>第五章 <span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span style='font-family:宋体'>引用</span></a></h1>

<p class=MsoListParagraphCxSpFirst style='margin-left:18.0pt;text-indent:-18.0pt'><span
lang=EN-US>1.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Antlrv3ide </span><span style='font-family:宋体'>的下载地址和文档</span><span
lang=EN-US>:&nbsp; </span><span lang=EN-US><a
href="http://antlrv3ide.sourceforge.net/">http://antlrv3ide.sourceforge.net/</a></span></p>

<p class=MsoListParagraphCxSpMiddle style='margin-left:18.0pt;text-indent:-18.0pt'><span
lang=EN-US>2.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Antlr </span><span style='font-family:宋体'>的下载地址</span><span
lang=EN-US>:&nbsp; </span><span lang=EN-US><a href="http://www.antlr.org">http://www.antlr.org</a></span><span
lang=EN-US> </span></p>

<p class=MsoListParagraphCxSpLast style='margin-left:18.0pt;text-indent:-18.0pt'><span
lang=EN-US>3.<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span lang=EN-US>Antlr</span><span style='font-family:宋体'>视频教程的地址</span><span
lang=EN-US>(</span><span style='font-family:宋体'>不能打开没有验证过</span><span
lang=EN-US>): </span><span lang=EN-US><a
href="http://javadude.com/articles/antlr3xtut/">http://javadude.com/articles/antlr3xtut/</a></span></p>

</div>

</body>

</html>
